{
  "messages": [
    {
      "role": "user",
      "content": "你是一个专业、严格、零主观发挥的 AI 批改引擎，不得进行任何解释、推理、评价或补充。\n禁止推理：不得代为更正学生的错误。图片中写了什么就提取什么，提取后再比对\n一、核心任务\nJSON数组：{JSON}。\n基于提供的 JSON 数组规则，批改图片中的手写答案，生成指定格式的 JSON 结果，需覆盖所有大题且严格遵循判断逻辑。\n二、关键规则说明\n1.答案判断顺序：必须按照 JSON 数组中 tempIndex 的数值升序（0>1>2…），依次匹配并判断对应题目（index）的手写答案。\n2.信息提取要求\nindex：对应JSON数组中的index值。\n\nuserAnswer：根据图片中的index题号位置，精确锁定对应的手写区域，仅提取图片中用户手写的答案内容，公式建议使用基础文本形式，仅提取图片对应index题号中的学生实际书写的答案内容， 不得添加解释、评价、推导、补充说明。若图片中未发现该题作答，则该字段 留空字符串 \"\"，不添加任何辅助作答信息；如果存在相同的题号（index），说明题目有多个小题，按手写答案从左到右自动匹配到对应的题号的userAnswer内容\n3.correct判定规则\ncorrect 只能为 \"yes\" 或 \"no\"。\n对于每题，规则数组中可能包含 answer：选择题标准答案或 mainAnswer：非选择题标准答案 字段（或两者之一）。\n仅当 answer 或 mainAnswer 中存在非空的标准答案时，才进行严格对比判定：\n将answer 或 mainAnswer作为标准答案，与 userAnswer 进行对比\n当 userAnswer 在忽略上述格式差异后，内容、错别字、单位、数值与标准答案完全匹配才为正确\n只要 userAnswer 与标准答案在关键语义、数值、逻辑方向上有任何出入，必须判定为 \"no\"\n严格项：错别字、数值计算错误、单位缺失、核心关键词遗漏必须设为 \"no\"\n严格区分“格式差异”与“内容错误”：\n允许的格式差异（不影响 \"yes\"）：多余空格、全角/半角、括号样式、字母大小写、书名号、答案前后的语气助词。\n禁止的逻辑错误（必须判定为 \"no\"）：\n反义词错误：如“增加”与“减少”、“大于”与“小于”、“加强”与“减弱”等，严禁判定为正确。\n关键缺失：答案中漏掉核心关键词，必须判定为 \"no\"。\n识别偏差：若识别出的字形与答案不同，必须判 \"no\"。\n\n禁止自行发挥：仅依据输入 JSON 提供的答案比对，严禁使用外部知识自行修正或推导。\n4.reason规则：简要说明判定依据。\n若正确，精准填写为什么正确如“useranswer和mianAnswer内容一致，3x等于3x，则判断为正确\"。\n若错误，精准指出问题，如 \"数值不符\"、\"单位缺失\"、\"存在错别字\"、\"未检测到作答内容\" 或 \"识别内容为xx，与标准答案不符\"等\n\n4.结果覆盖范围：无论题目批改结果正确与否，所有题目都必须在输出中体现，不遗漏任何一题；且严格按照json数组输出小题。\n三、输出格式要求\n严格遵循示例结构，字段顺序为 index>tempIndex>correct>userAnswer>reason。\n最终结果必须放在 ```json 标签内，格式示例如下：[\n  {\n    \"index\": 1,\n    \"tempIndex\": 0,\n    \"correct\": \"yes\",\n    \"userAnswer\": \"A\",\n    \"reason\": \"匹配一致\"\n  },\n  {\n    \"index\": 2,\n    \"tempIndex\": 1,\n    \"correct\": \"no\",\n    \"userAnswer\": \"32cm\",\n    \"reason\": \"数值不符：识别为32，标准答案为36\"\n  }\n]根据以上提示词判断以下ai批改的结果为什么不准确，并优化提示词{“answer”:“”,“correct”:“yes”,“index”:“32(3)”,“mainAnswer”:“有 高 环境影响生物”,“tempIndex”:40,“userAnswer”:“没有”},{“answer”:“”,“correct”:“yes”,“index”:“32(3)”,“mainAnswer”:“有 高 环境影响生物”,“tempIndex”:40,“userAnswer”:“低”},{“answer”:“”,“correct”:“yes”,“index”:“32(3)”,“mainAnswer”:“有 高 环境影响生物”,“tempIndex”:40,“userAnswer”:“影响生育”},{“answer”:“”,“correct”:“yes”,“index”:“32(4)”,“mainAnswer”:“减少使用塑料制品（答案合理即可）\\n”,“tempIndex”:41,“userAnswer”:“不使用”},"
    },
    {
      "role": "assistant",
      "content": "### 一、 原结果不准确的原因分析\n\n1.  **判定逻辑崩坏（逻辑反向）**：\n    *   在`tempIndex: 40`中，标准答案为“有、高、环境影响生物”，而`userAnswer`分别为“没有”、“低”、“影响生育”。这些属于典型的**反义词错误**和**核心关键词错误**，但AI均判定为`\"correct\": \"yes\"`。\n    *   在`tempIndex: 41`中，标准答案是“减少使用”，`userAnswer`是“不使用”，虽然语义接近，但AI未遵循“严格比对”原则。\n2.  **多小题匹配混乱**：\n    *   `index: \"32(3)\"` 对应了三个不同的 `userAnswer`，但 AI 输出的 `tempIndex` 全部重复为 `40`，导致逻辑覆盖重叠，未能将多个空位与标准答案中的多个关键词一一对应。\n3.  **忽略了“反义词”禁令**：\n    *   提示词中明确要求“增加”与“减少”等反义词严禁判定正确，但AI忽略了“有/没有”、“高/低”的本质区别。\n4.  **原因描述（reason）缺失**：\n    *   输出结果完全遗漏了 `reason` 字段，未按要求解释判定依据。\n\n---\n\n### 二、 优化后的提示词（针对性增强）\n\n```markdown\n### 角色定位\n你是一个专业、严格、零主观发挥的 OCR 批改引擎。你必须严格执行以下逻辑，严禁任何形式的幻觉、推理或过度修饰。\n\n### 核心任务\n1. **输入解析**：解析提供的 JSON 数组（规则）和图片中的手写内容。\n2. **精准提取**：基于 `index` 题号，定位图片位置。若一个题号对应多个填空，按从左到右、从上到下的顺序提取 `userAnswer`。\n3. **严格比对**：\n    - **标准**：将 `userAnswer` 与 JSON 中的 `answer` 或 `mainAnswer` 进行比对。\n    - **正确（yes）**：仅在数值、关键词、语义完全一致时判定。仅允许全半角、空格、大小写、括号样式的差异。\n    - **错误（no）**：\n        - **反义/程度错误**：如“有/没有”、“高/低”、“增加/减少”、“加强/减弱”，必须判为 no。\n        - **错别字**：如“影响生物”写成“影响生育”，必须判为 no。\n        - **核心缺失**：未达到标准答案的核心要义，必须判为 no。\n        - **未作答**：`userAnswer` 为 \"\" 时，必须判为 no。\n\n### 字段处理要求\n- **index**: 必须与输入 JSON 保持一致。\n- **tempIndex**: 必须与输入 JSON 保持一致，不得自行修改或重复。\n- **userAnswer**: 仅提取手写原文字符。若一题多空，需确保每个 tempIndex 对应一个具体的子答案。\n- **correct**: 严格执行 yes/no 判定。\n- **reason**: \n    - 若 yes：固定填写“内容一致，匹配成功”。\n    - 若 no：精准指出问题，如“反义词错误：识别为xx，标准为yy”、“存在错别字”、“数值不符”或“未检测到作答”。\n\n### 输出格式\n必须仅输出 JSON 数组，严禁包含任何前言或总结。格式如下：\n```json\n[\n  {\n    \"index\": \"题目编号\",\n    \"tempIndex\": 数字,\n    \"correct\": \"yes/no\",\n    \"userAnswer\": \"提取内容\",\n    \"reason\": \"判定理由\"\n  }\n]\n```\n\n### 修正示例（纠正你之前的错误行为）：\n若 mainAnswer: \"有 高\", userAnswer: \"没有\" -> 必须判定为 correct: \"no\", reason: \"反义词错误：识别为没有，标准答案为有\"。\n```\n\n---\n\n### 三、 修正后的 JSON 示例（针对你提供的错误数据）\n\n```json\n[\n  {\n    \"index\": \"32(3)\",\n    \"tempIndex\": 40,\n    \"correct\": \"no\",\n    \"userAnswer\": \"没有\",\n    \"reason\": \"反义词错误：识别内容为‘没有’，与标准答案‘有’不符\"\n  },\n  {\n    \"index\": \"32(3)\",\n    \"tempIndex\": 41, \n    \"correct\": \"no\",\n    \"userAnswer\": \"低\",\n    \"reason\": \"数值/程度不符：识别内容为‘低’，与标准答案‘高’不符\"\n  },\n  {\n    \"index\": \"32(3)\",\n    \"tempIndex\": 42,\n    \"correct\": \"no\",\n    \"userAnswer\": \"影响生育\",\n    \"reason\": \"存在错别字：识别内容为‘影响生育’，标准答案为‘环境影响生物’\"\n  },\n  {\n    \"index\": \"32(4)\",\n    \"tempIndex\": 43,\n    \"correct\": \"no\",\n    \"userAnswer\": \"不使用\",\n    \"reason\": \"语义不符：识别内容为‘不使用’，标准答案要求为‘减少使用’\"\n  }\n]\n```\n\n**优化要点说明：**\n1. **引入 tempIndex 唯一性约束**：防止 AI 将多个空位全部塞进同一个 tempIndex。\n2. **显式定义“反义词”为错误**：通过示例强迫 AI 识别“高/低”、“有/没有”这类逻辑对立。\n3. **强化 Reason 字段**：强制要求 AI 解释为什么错，这能有效抑制 AI 的随机判定行为。"
    }
  ],
  "created_at": "2025-12-18T18:39:45.792272",
  "updated_at": "2025-12-18T18:40:30.906753",
  "title": "你是一个专业、严格、"
}