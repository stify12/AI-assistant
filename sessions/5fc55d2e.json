{
  "messages": [
    {
      "role": "user",
      "content": "优化提示词，添加reason字段来让ai输出为什么判为yes/no：一、核心任务\nJSON数组：{JSON}。\n基于提供的 JSON 数组规则，批改图片中的手写答案，生成指定格式的 JSON 结果，需覆盖所有大题且严格遵循判断逻辑。\n二、关键规则说明\n1.答案判断顺序：必须按照 JSON 数组中 tempIndex 的数值升序（0>1>2…），依次匹配并判断对应题目（index）的手写答案。\n2.信息提取要求\nindex：对应JSON数组中的index值。\n\nuserAnswer：\n在图片中根据该 index 题号位置精准定位手写区域；\n只提取学生实际写出的答案内容（公式用基础文本表达即可）；\n不添加任何解释、推导、补全、改写、纠错；\n若图片中未发现该题作答：填空字符串 \"\"，不得添加任何辅助信息；\n\ncorrect：将 userAnswer 与标准答案（mainAnswer/answer）统一格式处理后，二者必须逐字意思完全一致为“yes”，否则一律判 \"no\"。\n禁止自行发挥：仅依据输入 JSON 提供的答案比对，严禁使用外部知识自行修正或推导。\n\n3.结果覆盖范围：无论题目批改结果正确与否，所有大题都必须在输出中体现，不遗漏任何一题；且不输出小题，仅呈现大题结果。\n三、输出格式要求\n严格遵循示例结构，字段顺序为 index>tempIndex>correct>userAnswer。\n最终结果必须放在 ```json 标签内，格式示例如下：[{\"index\":xx,\"tempIndex\":xx,\"correct\":\"xx\",\"userAnswer\":\"xx\"}]"
    },
    {
      "role": "assistant",
      "content": "下面是优化后的提示词（已加入 `reason` 字段，并要求说明判为 yes/no 的依据；同时保持“不得推导/补全/纠错”的约束）。你可直接复制使用。\n\n---\n\n### 优化提示词（含 reason 字段）\n\n一、核心任务  \n给定：  \n- 题目规则 JSON 数组：`{JSON}`  \n- 一张包含学生手写作答的图片  \n\n你需要基于提供的 JSON 数组规则，批改图片中的手写答案，生成指定格式的 JSON 结果，需覆盖所有大题且严格遵循判断逻辑。\n\n---\n\n二、关键规则说明  \n\n#### 1）判题顺序（强制）  \n必须严格按照 JSON 数组中 `tempIndex` 的数值升序（0,1,2…）依次处理；每个 `tempIndex` 对应其题目 `index`，逐题定位、提取、判定。\n\n#### 2）信息提取要求（强制）  \n\n**index**：直接取 JSON 数组里的 `index` 值。  \n\n**userAnswer**：  \n- 在图片中根据该 `index` 题号位置**精准定位**对应的手写作答区域；  \n- **只提取**学生实际写出的答案内容（公式允许用基础文本表达）；  \n- **禁止**添加任何解释、推导、补全、改写、纠错、猜测；  \n- 若图片中**未发现**该题作答：`userAnswer` 填空字符串 `\"\"`，不得添加任何辅助信息（如“未作答”“空白”等都不允许）。\n\n**correct**：  \n- 将 `userAnswer` 与标准答案（`mainAnswer` 或 `answer`）做**统一格式处理后**对比：  \n  - 允许的统一格式处理仅限：去除首尾空格、统一全角/半角、统一大小写（如题目允许）、去除不影响含义的空格/换行；  \n  - 不允许进行任何基于外部知识的等价变形、推导、改写、纠错。  \n- 二者必须“逐字意思完全一致”才判 `\"yes\"`；否则一律 `\"no\"`。  \n- 若 `userAnswer==\"\"`：必须判 `\"no\"`。\n\n**reason（新增字段，必须输出）**：  \n- 用一句话说明为什么判定为 yes/no；  \n- 只能基于“对比结果”给出原因，不得引入外部知识或推导；  \n- 输出规范：  \n  - 若 correct 为 `\"yes\"`：`reason` 写明“与标准答案一致（统一格式后完全匹配）”。  \n  - 若 correct 为 `\"no\"`：`reason` 必须指出“与标准答案不一致”或“未作答”，必要时可点出差异类型（如“答案缺失/多写内容/数值不同/符号不同/表达不同导致不匹配”），但不得解释对错原理。\n\n> 禁止自行发挥：仅依据输入 JSON 提供的标准答案比对，严禁使用外部知识自行修正或推导。\n\n#### 3）结果覆盖范围（强制）  \n无论对错，**所有大题都必须输出**，不遗漏任何一题；且**不输出小题**，仅呈现大题结果。\n\n---\n\n三、输出格式要求（强制）  \n- 最终输出必须是 **JSON 数组**  \n- 每个元素字段顺序严格为：`index > tempIndex > correct > userAnswer > reason`  \n- 最终结果必须放在 ```json 代码块内  \n- 示例结构：\n\n```json\n[\n  {\"index\": 1, \"tempIndex\": 0, \"correct\": \"no\", \"userAnswer\": \"\", \"reason\": \"未在图片中找到该题作答，判为不正确\"},\n  {\"index\": 2, \"tempIndex\": 1, \"correct\": \"yes\", \"userAnswer\": \"…\", \"reason\": \"与标准答案一致（统一格式后完全匹配）\"}\n]\n```",
      "model": "gpt-5.2"
    }
  ],
  "created_at": "2025-12-22T17:03:20.675695",
  "updated_at": "2025-12-22T17:06:25.069253",
  "title": "优化提示词，添加re"
}