/**
 * 测试计划看板 - 浅色主题样式
 * 遵循 UI 规范：背景 #f5f5f7，卡片 #fff，圆角 12px
 * 更新日志 2026-01-24:
 * - 侧边栏改为悬停展开效果
 * - 数据集概览和学科准确率替换为简化版
 */

/* ========== 变量定义 ========== */
:root {
    /* 浅色主题配色 */
    --bg-page: #f5f5f7;
    --bg-card: #ffffff;
    --bg-card-hover: #fafafa;
    --bg-sidebar: #ffffff;
    --bg-hover: #ffffff;  /* 悬停背景 - 白色 */
    --text-primary: #1d1d1f;
    --text-secondary: #424245;
    --text-muted: #86868b;
    --border-color: #d2d2d7;
    --border-light: #e5e5e5;
    
    /* 状态颜色 */
    --status-pending-bg: #f5f5f7;
    --status-pending-text: #86868b;
    --status-processing-bg: #e3f2fd;
    --status-processing-text: #1565c0;
    --status-completed-bg: #e3f9e5;
    --status-completed-text: #1e7e34;
    --status-failed-bg: #ffeef0;
    --status-failed-text: #d73a49;
    
    /* 难度颜色 */
    --difficulty-easy-bg: #e3f9e5;
    --difficulty-medium-bg: #fff3e0;
    --difficulty-hard-bg: #ffeef0;
    
    /* 圆角 */
    --radius-sm: 6px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-full: 9999px;
    
    /* 阴影 */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    
    /* 侧边栏宽度 - 悬停展开 */
    --sidebar-width: 280px;
    --sidebar-collapsed-width: 64px;
}

/* ========== 整体布局 ========== */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* 自定义滚动条 */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: #d1d1d6;
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: #a1a1a6;
}

body {
    display: flex;
    min-height: 100vh;
    background: var(--bg-page);
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
    color: var(--text-primary);
}


/* ========== 侧边栏 - 悬停展开效果 ========== */
.sidebar {
    width: var(--sidebar-collapsed-width);
    height: 100vh;
    background: var(--bg-sidebar);
    /* border-right: 1px solid var(--border-light); */
    border-right: none;
    box-shadow: 4px 0 24px rgba(0, 0, 0, 0.04);
    display: flex;
    flex-direction: column;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 100;
    transition: width 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    overflow: hidden;
}

.sidebar:hover {
    width: var(--sidebar-width);
    box-shadow: 8px 0 32px rgba(0, 0, 0, 0.08);
}

.sidebar.collapsed {
    width: 0;
    border-right: none;
    overflow: hidden;
}

/* 快捷入口视图 */
.sidebar-welcome {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 16px 12px;
    overflow-y: auto;
    overflow-x: hidden;
    width: var(--sidebar-width);
}

.sidebar-brand {
    display: flex;
    align-items: center;
    gap: 12px;
    padding-bottom: 16px;
    margin-bottom: 8px;
    border-bottom: 1px solid var(--border-light);
    white-space: nowrap;
}

.brand-icon {
    width: 40px;
    height: 40px;
    min-width: 40px;
    background: linear-gradient(135deg, var(--text-primary) 0%, #434343 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.sidebar:hover .brand-icon {
    transform: scale(1.1) rotate(-5deg);
}

.brand-text {
    font-size: 15px;
    font-weight: 600;
    color: var(--text-primary);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.sidebar:hover .brand-text {
    opacity: 1;
}

/* 导航区块 */
.nav-section {
    margin-bottom: 16px;
}

.nav-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0 4px;
    margin-bottom: 8px;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.sidebar:hover .nav-label {
    opacity: 1;
}

/* 导航卡片 */
.nav-card {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--radius-md);
    text-decoration: none;
    margin-bottom: 8px;
    transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
    cursor: pointer;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
}

.nav-card:hover {
    background: var(--bg-card);
    transform: translateY(-2px) translateX(4px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.nav-card::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--text-primary);
    opacity: 0;
    transition: opacity 0.2s ease;
    border-radius: 0 2px 2px 0;
}

.nav-card:hover::before {
    opacity: 1;
}

/* 主要入口卡片 */
.nav-card.featured {
    background: var(--text-primary);
    border-color: var(--text-primary);
    padding: 12px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
}

.nav-card.featured:hover {
    background: #000;
    border-color: #000;
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
}

.nav-card.featured::before {
    display: none;
}

.nav-card.featured .nav-card-icon {
    background: rgba(255, 255, 255, 0.15);
    color: #fff;
}

.nav-card.featured .nav-card-title {
    color: #fff;
}

.nav-card.featured .nav-card-desc {
    color: rgba(255, 255, 255, 0.7);
}

.nav-card-icon {
    width: 36px;
    height: 36px;
    min-width: 36px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-primary);
    flex-shrink: 0;
}

.nav-card-body {
    flex: 1;
    min-width: 0;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.sidebar:hover .nav-card-body {
    opacity: 1;
}

.nav-card-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 2px;
}

.nav-card-desc {
    font-size: 11px;
    color: var(--text-muted);
    line-height: 1.4;
}

/* 紧凑工具栏 */
.nav-tools-compact {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 4px 0;
}

.nav-tool-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    background: transparent;
    border-radius: var(--radius-md);
    text-decoration: none;
    color: var(--text-secondary);
    font-size: 13px;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.nav-tool-item:hover {
    background: var(--bg-card);
    color: var(--text-primary);
    transform: translateX(4px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.nav-tool-item svg {
    min-width: 18px;
}

.nav-tool-item span {
    opacity: 0;
    transition: opacity 0.2s ease;
}

.sidebar:hover .nav-tool-item span {
    opacity: 1;
}

.nav-tool-item:hover {
    background: var(--bg-page);
    border-color: var(--border-light);
    color: var(--text-primary);
}

/* 侧边栏底部 */
.sidebar-footer {
    flex-shrink: 0;
    padding: 8px;
    border-top: 1px solid var(--border-light);
    margin-top: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.sidebar:hover .sidebar-footer {
    padding: 12px;
    /* 保持垂直排列，更整齐 */
    flex-direction: column;
    gap: 8px;
}

.footer-btn {
    display: flex;
    align-items: center;
    justify-content: flex-start; /* 左对齐 */
    gap: 12px;
    width: 48px;
    height: 48px;
    padding: 0 13px; /* (48 - 2 - 20) / 2 = 13px，确保图标居中 */
    background: var(--bg-page);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    white-space: nowrap;
    overflow: hidden;
}

.footer-btn svg {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    min-width: 20px;
    color: var(--text-primary);
    transition: color 0.2s ease;
}

.footer-btn span {
    opacity: 0;
    max-width: 0;
    transform: translateX(-10px);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.sidebar:hover .footer-btn {
    width: 100%; /* 展开时占满宽度 */
    padding: 10px 12px;
    background: transparent; /* 默认透明，悬停变色 */
    border-color: transparent;
}

.sidebar:hover .footer-btn span {
    opacity: 1;
    max-width: 120px;
    transform: translateX(0);
}

.footer-btn:hover {
    background: var(--bg-card) !important;
    border-color: var(--border-color) !important;
    color: var(--text-primary);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.footer-btn:hover svg {
    color: var(--text-primary);
}

/* ========== 主内容区 ========== */
.main-content {
    flex: 1;
    margin-left: var(--sidebar-collapsed-width);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: margin-left 0.25s ease;
}

.sidebar.collapsed + .main-content {
    margin-left: 0;
}

/* ========== 顶部栏 ========== */
.top-bar {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px 24px;
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border-light);
    position: sticky;
    top: 0;
    z-index: 50;
    transition: background 0.3s ease;
}

.menu-btn {
    width: 36px;
    height: 36px;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    transition: all 0.15s ease;
}

.menu-btn:hover {
    background: var(--bg-page);
}

.sync-info {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: var(--text-muted);
}

.sync-time {
    color: var(--text-secondary);
}

.refresh-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-full);
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.15s ease;
}

.refresh-btn:hover {
    background: var(--bg-page);
}

.refresh-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.refresh-btn.loading .refresh-icon {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.search-box {
    flex: 1;
    max-width: 400px;
    position: relative;
    margin-left: auto;
}

.search-box .search-icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
}

.search-box input {
    width: 100%;
    padding: 8px 12px 8px 38px;
    background: var(--bg-page);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-full);
    font-size: 13px;
    color: var(--text-primary);
    outline: none;
    transition: all 0.15s ease;
}

.search-box input:focus {
    border-color: var(--text-primary);
    background: var(--bg-card);
}

.search-box input::placeholder {
    color: var(--text-muted);
}

.search-results {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    right: 0;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
    max-height: 400px;
    overflow-y: auto;
    z-index: 100;
}

.search-result-item {
    padding: 10px 14px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-light);
    transition: background 0.15s ease;
}

.search-result-item:last-child {
    border-bottom: none;
}

.search-result-item:hover {
    background: var(--bg-page);
}

.search-result-item mark {
    background: #fff3e0;
    color: inherit;
    padding: 0 2px;
    border-radius: 2px;
}


/* ========== 统计概览区 (US-2) ========== */
.stats-section {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 24px;
    padding: 32px 24px 24px;
}

.stat-card {
    background: var(--bg-card);
    border-radius: 16px;
    padding: 24px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    border: 1px solid rgba(0,0,0,0.02);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
    position: relative;
    overflow: hidden;
}

/* 错误率卡片特殊样式 */
.stat-card.stat-card-error .stat-value {
    color: var(--status-failed-text);
}

.stat-card.stat-card-error::after {
    background: linear-gradient(90deg, var(--status-failed-text), transparent);
}

.stat-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, var(--text-primary), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.stat-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08);
    border-color: rgba(0,0,0,0.05);
}

.stat-card:hover::after {
    opacity: 1;
}

.stat-value {
    font-size: 32px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.stat-label {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 8px;
}

.stat-detail {
    font-size: 12px;
    color: var(--text-secondary);
}

.stat-source {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 4px;
    cursor: help;
}

.time-filter {
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.15s ease;
}

.time-filter:hover {
    background: var(--bg-page);
}

.time-filter.active {
    background: var(--text-primary);
    color: #fff;
}

.trend-arrow {
    font-size: 18px;
}

.trend-arrow.up {
    color: var(--status-completed-text);
}

.trend-arrow.up::before {
    content: '\2191';
}

.trend-arrow.down {
    color: var(--status-failed-text);
}

.trend-arrow.down::before {
    content: '\2193';
}

/* 骨架屏 */
.stat-card-skeleton {
    animation: pulse 1.5s ease-in-out infinite;
}

.skeleton-value {
    width: 80px;
    height: 32px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
}

.skeleton-label {
    width: 60px;
    height: 14px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
}

.skeleton-detail {
    width: 120px;
    height: 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* 增强骨架屏动画 (US-30.3) */
@keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

@keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* 骨架屏脉冲动画类 */
.skeleton-pulse {
    animation: pulse 1.5s ease-in-out infinite;
}

/* 骨架屏闪烁动画类 */
.skeleton-shimmer {
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

/* 统计卡片骨架屏增强 */
.stat-card-skeleton {
    animation: pulse 1.5s ease-in-out infinite;
}

.stat-card-skeleton .skeleton-value,
.stat-card-skeleton .skeleton-label,
.stat-card-skeleton .skeleton-detail {
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

/* 任务列表骨架屏增强 */
.task-item-skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

/* 数据集列表骨架屏增强 */
.dataset-item-skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

/* 学科图表骨架屏增强 */
.subject-bar-skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

/* 热点图骨架屏增强 */
.heatmap-skeleton-item {
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

/* ========== 主体内容区 ========== */
.dashboard-body {
    display: grid;
    grid-template-columns: 1fr 400px;
    gap: 24px;
    padding: 0 24px 24px;
    flex: 1;
}

/* ========== 任务列表区 (US-3) ========== */
.task-section {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 20px;
    display: flex;
    flex-direction: column;
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}

.section-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

.status-filters {
    display: flex;
    gap: 4px;
}

.status-filter {
    padding: 6px 12px;
    background: transparent;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 500;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.15s ease;
}

.status-filter:hover {
    border-color: var(--border-color);
    color: var(--text-secondary);
}

.status-filter.active {
    background: var(--text-primary);
    border-color: var(--text-primary);
    color: #fff;
}

.task-list {
    flex: 1;
    overflow-y: auto;
    min-height: 300px;
}

.task-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background 0.15s ease;
    border-bottom: 1px solid var(--border-light);
}

.task-item:last-child {
    border-bottom: none;
}

.task-item:hover {
    background: var(--bg-page);
}

.task-info {
    flex: 1;
    min-width: 0;
}

.task-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 4px;
}

.task-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 12px;
    color: var(--text-muted);
}

.task-accuracy {
    font-weight: 600;
    color: var(--text-primary);
}

.task-questions {
    color: var(--text-secondary);
}

/* 状态标签 (US-3.3) */
.status-tag {
    padding: 4px 10px;
    border-radius: var(--radius-full);
    font-size: 11px;
    font-weight: 500;
    white-space: nowrap;
}

.status-tag.pending {
    background: var(--status-pending-bg);
    color: var(--status-pending-text);
}

.status-tag.processing {
    background: var(--status-processing-bg);
    color: var(--status-processing-text);
}

.status-tag.completed {
    background: var(--status-completed-bg);
    color: var(--status-completed-text);
}

.status-tag.failed {
    background: var(--status-failed-bg);
    color: var(--status-failed-text);
}

/* 任务骨架屏 */
.task-skeleton {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.task-item-skeleton {
    height: 60px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    animation: pulse 1.5s ease-in-out infinite;
}

/* 分页 */
.task-pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-light);
    margin-top: 16px;
}

.pagination-btn {
    padding: 6px 14px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    font-size: 13px;
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.15s ease;
}

.pagination-btn:hover:not(:disabled) {
    background: var(--bg-page);
}

.pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.pagination-info {
    font-size: 13px;
    color: var(--text-muted);
}


/* ========== 右侧面板 ========== */
.right-panel {
    display: flex;
    flex-direction: column;
    gap: 20px;
    min-width: 0;
    overflow: hidden;
}

/* ========== 数据集统计概览（简化版） ========== */
.dataset-stats-section {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 24px;
    min-width: 0;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
}

.dataset-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 24px;
}

.mini-stat-card {
    background: #fff;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    padding: 16px 12px;
    text-align: center;
    min-width: 0;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}

.mini-stat-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
    border-color: var(--border-color);
}

.mini-stat-value {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
    margin-bottom: 4px;
}

.mini-stat-label {
    font-size: 12px;
    color: var(--text-secondary);
    font-weight: 500;
}

/* 图表区 - 学科分布饼图 */
.dataset-chart-area {
    display: flex;
    align-items: center;
    gap: 32px;
    padding: 16px 0;
}

.pie-chart-wrapper {
    flex-shrink: 0;
    position: relative;
}

.pie-legend-wrapper {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    min-width: 0;
}

.pie-legend-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid transparent;
}

.pie-legend-item:hover {
    background: #fff;
    border-color: var(--border-color);
    transform: translateX(4px);
    box-shadow: var(--shadow-sm);
}

.pie-legend-item.active {
    background: #fff;
    border-color: var(--text-primary);
    font-weight: 500;
}

.pie-legend-color {
    width: 12px;
    height: 12px;
    border-radius: 4px;
    flex-shrink: 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.15);
}

.pie-legend-label {
    flex: 1;
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 500;
}

.pie-legend-value {
    font-size: 14px;
    font-weight: 700;
    color: var(--text-primary);
}

.chart-container {
    flex: 1;
    min-width: 0;
}

.pie-container {
    display: flex;
    align-items: center;
    gap: 24px;
    flex: 0 0 auto;
}

.usage-container {
    flex: 1;
    min-width: 0;
}

.chart-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.chart-title::before {
    content: '';
    width: 4px;
    height: 16px;
    background: var(--text-primary);
    border-radius: 2px;
}

/* 准确率 Top5 */
.usage-top5 {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.usage-bar-item {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    padding: 8px;
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
    border: 1px solid transparent;
}

.usage-bar-item:hover {
    background: var(--bg-page);
    border-color: var(--border-light);
    transform: translateX(4px);
}

.usage-bar-rank {
    width: 24px;
    height: 24px;
    background: var(--bg-page);
    border-radius: 6px;
    font-size: 12px;
    font-weight: 700;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
}

.usage-bar-item:nth-child(1) .usage-bar-rank { color: #d97706; background: #fef3c7; }
.usage-bar-item:nth-child(2) .usage-bar-rank { color: #4b5563; background: #f3f4f6; }
.usage-bar-item:nth-child(3) .usage-bar-rank { color: #92400e; background: #ffedd5; }

.usage-bar-info {
    flex: 1;
    min-width: 0;
}

.usage-bar-name {
    font-size: 13px;
    color: var(--text-primary);
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 6px;
}

.usage-bar-track {
    height: 6px;
    background: var(--bg-page);
    border-radius: 3px;
    overflow: hidden;
}

.usage-bar-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.usage-bar-count {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    flex-shrink: 0;
    min-width: 50px;
    text-align: right;
}

/* ========== 学科分析区（简化版） ========== */
.subject-analysis-section {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 24px;
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
}

/* ========== 学科分析区（主区域版本） ========== */
.subject-analysis-section-main {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 24px;
    flex: 1;
    display: flex;
    flex-direction: column;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-light);
}

/* 学科统计摘要 */
.subject-summary {
    display: flex;
    gap: 24px;
    padding: 16px 0;
    margin-bottom: 16px;
    border-bottom: 1px solid var(--border-light);
}

.subject-summary-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.subject-summary-value {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
}

.subject-summary-label {
    font-size: 12px;
    color: var(--text-muted);
}

/* 主区域学科列表 */
.subject-list-main {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    flex: 1;
    overflow-y: auto;
    padding-right: 4px;
}

.subject-controls {
    display: flex;
    gap: 8px;
}

.btn-text {
    background: transparent;
    border: none;
    padding: 6px 12px;
    font-size: 12px;
    color: var(--text-muted);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
    border-radius: var(--radius-sm);
    transition: all 0.15s ease;
}

.btn-text:hover {
    background: var(--bg-page);
    color: var(--text-primary);
}

/* 学科列表 */
.subject-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    flex: 1;
    overflow-y: auto;
    padding-right: 4px;
}

.subject-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--bg-page);
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
    border: 1px solid transparent;
}

.subject-item:hover {
    background: #fff;
    box-shadow: var(--shadow-sm);
    border-color: var(--border-light);
    transform: translateX(2px);
}

/* 低准确率警告样式 */
.subject-item.subject-item-warning {
    background: #fef2f2;
    border-left: 3px solid var(--status-failed-text);
}

.subject-item.subject-item-warning:hover {
    background: #ffe4e6;
}

.subject-item-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.subject-dot {
    width: 10px;
    height: 10px;
    border-radius: 3px;
    flex-shrink: 0;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.subject-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.subject-item-right {
    display: flex;
    align-items: center;
    gap: 20px;
}

.subject-stats {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 2px;
}

.subject-stat-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.subject-stat-label {
    font-size: 11px;
    color: var(--text-muted);
}

.subject-accuracy {
    font-size: 15px;
    font-weight: 600;
    min-width: 50px;
    text-align: right;
}

/* 学科骨架屏 */
.subject-skeleton {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 8px 0;
}

.skeleton-chart {
    height: 200px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    border-radius: var(--radius-sm);
    animation: shimmer 1.5s infinite;
}

.empty-state-sm {
    padding: 24px;
    text-align: center;
}

.empty-state-sm .empty-state-text {
    font-size: 13px;
    color: var(--text-muted);
}

/* ========== 旧版数据集区样式（保留兼容） ========== */
.dataset-section {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 20px;
}

.dataset-controls {
    display: flex;
    gap: 8px;
}

.subject-filter,
.sort-select {
    padding: 6px 10px;
    background: var(--bg-page);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
    font-size: 12px;
    color: var(--text-primary);
    cursor: pointer;
    outline: none;
}

.subject-filter:focus,
.sort-select:focus {
    border-color: var(--text-primary);
}

.dataset-list {
    max-height: 200px;
    overflow-y: auto;
    margin-bottom: 16px;
}

.dataset-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background 0.15s ease;
    border-bottom: 1px solid var(--border-light);
    position: relative;
}

.dataset-item:last-child {
    border-bottom: none;
}

.dataset-item:hover {
    background: var(--bg-page);
}

.dataset-info {
    flex: 1;
    min-width: 0;
}

.dataset-name {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 2px;
}

.dataset-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
    color: var(--text-muted);
}

.dataset-subject {
    padding: 2px 6px;
    background: var(--bg-page);
    border-radius: 4px;
}

/* 难度标签 (US-4.6) */
.difficulty-tag {
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
}

.difficulty-tag.easy {
    background: var(--difficulty-easy-bg);
    color: var(--status-completed-text);
}

.difficulty-tag.medium {
    background: var(--difficulty-medium-bg);
    color: #e65100;
}

.difficulty-tag.hard {
    background: var(--difficulty-hard-bg);
    color: var(--status-failed-text);
}

/* 数据集悬停提示 (US-4.8) */
.dataset-tooltip {
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: var(--text-primary);
    color: #fff;
    padding: 10px 14px;
    border-radius: var(--radius-sm);
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 10;
}

.dataset-tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: var(--text-primary);
}

.dataset-item:hover .dataset-tooltip {
    opacity: 1;
    visibility: visible;
}

/* 数据集骨架屏 */
.dataset-skeleton {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.dataset-item-skeleton {
    height: 50px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    animation: pulse 1.5s ease-in-out infinite;
}

/* 学科分布饼图 - 旧版 */
.subject-pie-container {
    display: flex;
    align-items: center;
    gap: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-light);
}

#subjectPieChart {
    flex-shrink: 0;
}

.pie-legend-label {
    color: var(--text-secondary);
}

.pie-legend-value {
    color: var(--text-primary);
    font-weight: 500;
    margin-left: auto;
}

/* ========== 学科概览区 (US-5) ========== */
.subject-section {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 20px;
    flex: 1;
}

.subject-chart-container {
    min-height: 200px;
}

.subject-chart {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.subject-bar-item {
    display: flex;
    align-items: center;
    gap: 12px;
}

.subject-bar-label {
    width: 50px;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    text-align: right;
}

.subject-bar-wrapper {
    flex: 1;
    height: 24px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    overflow: hidden;
    position: relative;
}

.subject-bar-fill {
    height: 100%;
    border-radius: var(--radius-sm);
    transition: width 0.5s ease;
}

.subject-bar-fill.good {
    background: linear-gradient(90deg, #10a37f, #1e7e34);
}

.subject-bar-fill.warning {
    background: linear-gradient(90deg, #f59e0b, #e65100);
}

.subject-bar-fill.danger {
    background: linear-gradient(90deg, #ef4444, #d73a49);
}

.subject-bar-value {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 12px;
    font-weight: 600;
    color: var(--text-primary);
}

.subject-bar-item.low-accuracy {
    background: var(--status-failed-bg);
    border-radius: var(--radius-sm);
    padding: 4px;
    margin: -4px;
}

/* 学科骨架屏 */
.subject-skeleton {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.subject-bar-skeleton {
    height: 32px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    animation: pulse 1.5s ease-in-out infinite;
}


/* ========== Toast 通知 ========== */
.toast-container {
    position: fixed;
    top: 24px;
    right: 24px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.toast {
    padding: 12px 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
    font-size: 14px;
    color: var(--text-primary);
    animation: slideIn 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
}

.toast.success {
    border-left: 4px solid var(--status-completed-text);
}

.toast.error {
    border-left: 4px solid var(--status-failed-text);
}

.toast.warning {
    border-left: 4px solid #e65100;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ========== 空状态 ========== */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    color: var(--text-muted);
}

.empty-state-icon {
    font-size: 48px;
    margin-bottom: 12px;
    opacity: 0.5;
}

.empty-state-text {
    font-size: 14px;
}

/* ========== 响应式布局 (US-1.5) ========== */
@media (max-width: 1200px) {
    .dashboard-body {
        grid-template-columns: 1fr;
    }
    
    .right-panel {
        flex-direction: row;
    }
    
    .dataset-section,
    .subject-section {
        flex: 1;
    }
}

@media (max-width: 900px) {
    .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        z-index: 300;
        transform: translateX(-100%);
    }
    
    .sidebar.show {
        transform: translateX(0);
    }
    
    .main-content {
        margin-left: 0;
    }
}

@media (max-width: 768px) {
    .stats-section {
        grid-template-columns: repeat(2, 1fr);
        padding: 16px;
    }
    
    .dashboard-body {
        padding: 0 16px 16px;
    }
    
    .right-panel {
        flex-direction: column;
    }
    
    .top-bar {
        padding: 12px 16px;
    }
    
    .search-box {
        display: none;
    }
    
    .status-filters {
        flex-wrap: wrap;
    }
}

@media (max-width: 480px) {
    .stats-section {
        grid-template-columns: 1fr;
    }
    
    .stat-card {
        padding: 16px;
    }
    
    .stat-value {
        font-size: 24px;
    }
}


/* ========== AI生成测试计划弹窗 (US-7) ========== */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    padding: 20px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.modal[style*="display: flex"] {
    opacity: 1;
    visibility: visible;
}

.modal-content {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    width: 100%;
    max-width: 600px;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
    transform: scale(0.95);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.modal[style*="display: flex"] .modal-content {
    transform: scale(1);
}

.ai-plan-modal {
    max-width: 700px;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid var(--border-light);
}

.modal-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

.modal-close {
    width: 32px;
    height: 32px;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    transition: all 0.15s ease;
}

.modal-close:hover {
    background: var(--bg-page);
    color: var(--text-primary);
}

.modal-body {
    padding: 24px;
    overflow-y: auto;
    flex: 1;
}

.modal-footer {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 12px;
    padding: 16px 24px;
    border-top: 1px solid var(--border-light);
}

/* 表单样式 */
.form-group {
    margin-bottom: 20px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.form-label {
    display: block;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.form-label .required {
    color: var(--status-failed-text);
}

.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 10px 12px;
    background: #ffffff;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    font-size: 14px;
    color: #1d1d1f;
    outline: none;
    transition: all 0.15s ease;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    border-color: var(--text-primary);
    box-shadow: 0 0 0 3px rgba(29, 29, 31, 0.1);
}

.form-input::placeholder,
.form-textarea::placeholder {
    color: var(--text-muted);
}

.form-textarea {
    resize: vertical;
    min-height: 60px;
}

.form-hint {
    display: block;
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 4px;
}

/* 数据集复选框列表 */
.dataset-checkbox-list {
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
    padding: 8px;
}

.dataset-checkbox-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background 0.15s ease;
}

.dataset-checkbox-item:hover {
    background: var(--bg-page);
}

.dataset-checkbox-item input[type="checkbox"] {
    width: 16px;
    height: 16px;
    margin-top: 2px;
    cursor: pointer;
    accent-color: var(--text-primary);
}

.checkbox-label {
    flex: 1;
    min-width: 0;
}

.checkbox-label .dataset-name {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 2px;
}

.checkbox-label .dataset-info {
    font-size: 11px;
    color: var(--text-muted);
}

.loading-text,
.empty-text,
.error-text {
    padding: 20px;
    text-align: center;
    font-size: 13px;
    color: var(--text-muted);
}

.error-text {
    color: var(--status-failed-text);
}

/* 按钮样式 */
.btn {
    padding: 10px 20px;
    border-radius: var(--radius-sm);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    border: none;
}

.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.btn-primary {
    background: var(--text-primary);
    color: #fff;
}

.btn-primary:hover:not(:disabled) {
    background: #000;
}

.btn-secondary {
    background: var(--bg-page);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}

.btn-secondary:hover:not(:disabled) {
    background: var(--border-light);
}

.btn-danger {
    background: #ffeef0;
    color: #1d1d1f;
    border: 1px solid #f8d7da;
}

.btn-danger:hover:not(:disabled) {
    background: #fdd;
}

.btn-ai {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #fff;
    padding: 6px 12px;
    font-size: 12px;
    border-radius: var(--radius-full);
}

.btn-ai:hover {
    opacity: 0.9;
}

.btn-ai svg {
    flex-shrink: 0;
}

.btn-loading {
    width: 14px;
    height: 14px;
    border: 2px solid transparent;
    border-top-color: currentColor;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

/* AI计划结果区域 */
.ai-plan-result {
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin: -24px;
    padding: 24px;
}

.plan-section {
    margin-bottom: 20px;
}

.plan-section:last-child {
    margin-bottom: 0;
}

.plan-section-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.plan-section-title::before {
    content: '';
    width: 3px;
    height: 14px;
    background: var(--text-primary);
    border-radius: 2px;
}

.plan-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.objectives-list .objective-item,
.criteria-list .criteria-item {
    position: relative;
    padding: 8px 12px 8px 24px;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    margin-bottom: 6px;
    font-size: 13px;
    color: var(--text-secondary);
}

.objectives-list .objective-item::before {
    content: '';
    position: absolute;
    left: 10px;
    top: 14px;
    width: 6px;
    height: 6px;
    background: var(--status-completed-text);
    border-radius: 50%;
}

.criteria-list .criteria-item::before {
    content: '';
    position: absolute;
    left: 10px;
    top: 14px;
    width: 6px;
    height: 6px;
    background: var(--status-processing-text);
    border-radius: 50%;
}

.steps-list {
    counter-reset: step;
}

.steps-list .step-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 10px 12px;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    margin-bottom: 6px;
    font-size: 13px;
    color: var(--text-secondary);
}

.step-num {
    width: 22px;
    height: 22px;
    background: var(--text-primary);
    color: #fff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 600;
    flex-shrink: 0;
}

.plan-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.plan-duration {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    padding: 12px 16px;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    text-align: center;
}

/* 响应式调整 */
@media (max-width: 768px) {
    .modal-content {
        max-height: 100vh;
        border-radius: 0;
    }
    
    .ai-plan-modal {
        max-width: 100%;
    }
    
    .form-row {
        grid-template-columns: 1fr;
    }
    
    .plan-row {
        grid-template-columns: 1fr;
    }
    
    .dataset-controls {
        flex-wrap: wrap;
    }
    
    .btn-ai span {
        display: none;
    }
}


/* ========== 调度配置弹窗 (US-10) ========== */
.schedule-modal {
    max-width: 500px;
    width: 90%;
}

.schedule-toggle-group {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-md);
    margin-bottom: 20px;
}

.schedule-toggle-group .form-label {
    margin-bottom: 0;
    font-weight: 500;
}

/* 开关样式 */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 48px;
    height: 26px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #d2d2d7;
    transition: 0.3s;
    border-radius: 26px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.toggle-switch input:checked + .toggle-slider {
    background-color: #1e7e34;
}

.toggle-switch input:checked + .toggle-slider:before {
    transform: translateX(22px);
}

/* 调度配置区域 */
.schedule-config {
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-md);
    margin-bottom: 20px;
}

.schedule-config .form-group {
    margin-bottom: 16px;
}

.schedule-config .form-group:last-child {
    margin-bottom: 0;
}

/* 下次执行时间 */
.schedule-next-run {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background: var(--status-processing-bg);
    border-radius: var(--radius-md);
    margin-bottom: 20px;
}

.next-run-label {
    font-size: 14px;
    color: var(--text-secondary);
}

.next-run-time {
    font-size: 16px;
    font-weight: 600;
    color: var(--status-processing-text);
}

/* 执行日志区域 */
.schedule-logs-section {
    border-top: 1px solid var(--border-light);
    padding-top: 16px;
}

.section-header-small {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
}

.section-title-small {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.schedule-logs {
    max-height: 200px;
    overflow-y: auto;
}

.log-item {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
    font-size: 13px;
}

.log-item:last-child {
    margin-bottom: 0;
}

.log-action {
    font-weight: 500;
    color: var(--text-primary);
}

.log-time {
    color: var(--text-muted);
    font-size: 12px;
}

.log-message {
    width: 100%;
    color: var(--text-secondary);
    font-size: 12px;
    margin-top: 4px;
}

/* 日志状态样式 */
.log-item.log-success {
    border-left: 3px solid var(--status-completed-text);
}

.log-item.log-failed {
    border-left: 3px solid var(--status-failed-text);
    background: var(--status-failed-bg);
}

.log-item.log-skipped {
    border-left: 3px solid var(--text-muted);
}

.log-item.log-pending {
    border-left: 3px solid var(--status-processing-text);
}

/* 按钮样式 */
.btn-warning {
    background: #fff3e0;
    color: #e65100;
    border: 1px solid #ffcc80;
}

.btn-warning:hover {
    background: #ffe0b2;
}

.btn-text {
    background: transparent;
    color: var(--status-processing-text);
    padding: 4px 8px;
    font-size: 12px;
}

.btn-text:hover {
    background: var(--bg-page);
}

/* 表单提示 */
.form-hint {
    display: block;
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 4px;
}

/* 响应式调整 */
@media (max-width: 768px) {
    .schedule-modal {
        max-width: 100%;
    }
    
    .schedule-toggle-group {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
    }
    
    .schedule-next-run {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
}


/* ========== 问题热点图 (US-11) ========== */
.heatmap-section {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 20px;
    margin-top: 24px;
}

.heatmap-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}

.heatmap-controls {
    display: flex;
    gap: 8px;
}

.heatmap-filter {
    padding: 6px 10px;
    background: var(--bg-page);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
    font-size: 12px;
    color: var(--text-primary);
    cursor: pointer;
    outline: none;
}

.heatmap-filter:focus {
    border-color: var(--text-primary);
}

/* 热点图容器 */
.heatmap-container {
    min-height: 200px;
}

/* 热点图骨架屏 */
.heatmap-skeleton {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.heatmap-skeleton-item {
    height: 60px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    animation: pulse 1.5s ease-in-out infinite;
}

/* 热点图内容 */
.heatmap-content {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

/* 书本级别 */
.heatmap-book {
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.heatmap-book-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--bg-page);
    cursor: pointer;
    transition: background 0.15s ease;
}

.heatmap-book-header:hover {
    background: var(--border-light);
}

.heatmap-book-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.heatmap-book-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.heatmap-book-subject {
    padding: 2px 8px;
    background: var(--bg-card);
    border-radius: 4px;
    font-size: 11px;
    color: var(--text-muted);
}

.heatmap-book-count {
    display: flex;
    align-items: center;
    gap: 8px;
}

.heatmap-error-badge {
    padding: 4px 10px;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 600;
}

.heatmap-error-badge.critical {
    background: #ffeef0;
    color: #d73a49;
}

.heatmap-error-badge.high {
    background: #fff3e0;
    color: #e65100;
}

.heatmap-error-badge.medium {
    background: #fffde7;
    color: #f9a825;
}

.heatmap-error-badge.low {
    background: #e3f9e5;
    color: #4caf50;
}

.heatmap-expand-icon {
    width: 20px;
    height: 20px;
    color: var(--text-muted);
    transition: transform 0.2s ease;
}

.heatmap-book.expanded .heatmap-expand-icon {
    transform: rotate(180deg);
}

/* 页码级别 */
.heatmap-pages {
    display: none;
    padding: 0 16px 16px;
}

.heatmap-book.expanded .heatmap-pages {
    display: block;
}

.heatmap-page {
    margin-top: 12px;
}

.heatmap-page-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background 0.15s ease;
}

.heatmap-page-header:hover {
    background: var(--border-light);
}

.heatmap-page-num {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
}

.heatmap-page-count {
    font-size: 12px;
    color: var(--text-muted);
}

/* 题目级别 - 热点格子 */
.heatmap-questions {
    display: none;
    padding: 12px;
    margin-top: 8px;
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
}

.heatmap-page.expanded .heatmap-questions {
    display: block;
}

.heatmap-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

/* 热点格子 */
.heatmap-cell {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-sm);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.15s ease;
    position: relative;
}

.heatmap-cell:hover {
    transform: scale(1.1);
    z-index: 1;
    box-shadow: var(--shadow-md);
}

.heatmap-cell-index {
    font-size: 12px;
    font-weight: 600;
    color: inherit;
}

.heatmap-cell-count {
    font-size: 10px;
    opacity: 0.8;
}

/* 热点等级颜色 (US-11.2) */
.heatmap-cell.critical {
    background: #d73a49;
    color: #fff;
}

.heatmap-cell.high {
    background: #e65100;
    color: #fff;
}

.heatmap-cell.medium {
    background: #f9a825;
    color: #1d1d1f;
}

.heatmap-cell.low {
    background: #4caf50;
    color: #fff;
}

/* 热点格子悬停提示 */
.heatmap-cell-tooltip {
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: var(--text-primary);
    color: #fff;
    padding: 8px 12px;
    border-radius: var(--radius-sm);
    font-size: 11px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 100;
    pointer-events: none;
}

.heatmap-cell-tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 5px solid transparent;
    border-top-color: var(--text-primary);
}

.heatmap-cell:hover .heatmap-cell-tooltip {
    opacity: 1;
    visibility: visible;
}

/* 热点图图例 */
.heatmap-legend {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 16px;
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-light);
}

.heatmap-legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--text-muted);
}

.heatmap-legend-color {
    width: 16px;
    height: 16px;
    border-radius: 4px;
}

.heatmap-legend-color.critical {
    background: #d73a49;
}

.heatmap-legend-color.high {
    background: #e65100;
}

.heatmap-legend-color.medium {
    background: #f9a825;
}

.heatmap-legend-color.low {
    background: #4caf50;
}

/* 热点图统计摘要 */
.heatmap-summary {
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 12px 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 16px;
}

.heatmap-summary-item {
    display: flex;
    align-items: center;
    gap: 8px;
}

.heatmap-summary-value {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
}

.heatmap-summary-label {
    font-size: 12px;
    color: var(--text-muted);
}

/* 错误详情弹窗 */
.heatmap-detail-modal {
    max-width: 700px;
}

.heatmap-detail-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.heatmap-detail-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

.heatmap-detail-badge {
    padding: 4px 10px;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 500;
}

.heatmap-error-list {
    max-height: 400px;
    overflow-y: auto;
}

.heatmap-error-item {
    padding: 12px;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
}

.heatmap-error-item:last-child {
    margin-bottom: 0;
}

.heatmap-error-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.heatmap-error-label {
    font-size: 13px;
    color: var(--text-muted);
}

.heatmap-error-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

/* 热点图书本分组 */
.heatmap-book-group {
    margin-bottom: 16px;
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-md);
}

.heatmap-book-group:last-child {
    margin-bottom: 0;
}

.heatmap-book-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-light);
}

.heatmap-cells {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.heatmap-cell {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 56px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.15s ease;
}

.heatmap-cell:hover {
    transform: scale(1.08);
    box-shadow: var(--shadow-md);
}

.heatmap-cell-label {
    font-size: 11px;
    font-weight: 500;
    margin-bottom: 2px;
}

.heatmap-cell-count {
    font-size: 14px;
    font-weight: 600;
}

/* 热点等级颜色 */
.heatmap-cell.critical {
    background: #d73a49;
    color: #fff;
}

.heatmap-cell.high {
    background: #e65100;
    color: #fff;
}

.heatmap-cell.medium {
    background: #f9a825;
    color: #1d1d1f;
}

.heatmap-cell.low {
    background: #4caf50;
    color: #fff;
}

.heatmap-error-item:last-child {
    margin-bottom: 0;
}

.heatmap-error-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
    font-size: 12px;
    color: var(--text-muted);
}

.heatmap-error-type {
    padding: 2px 8px;
    background: var(--status-failed-bg);
    color: var(--status-failed-text);
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
}

.heatmap-error-answers {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 12px;
    font-size: 13px;
}

.heatmap-answer-group {
    padding: 8px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

.heatmap-answer-label {
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 4px;
}

.heatmap-answer-value {
    color: var(--text-primary);
    word-break: break-all;
}

/* 空状态 */
.heatmap-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    color: var(--text-muted);
}

.heatmap-empty-icon {
    font-size: 48px;
    margin-bottom: 12px;
    opacity: 0.5;
}

.heatmap-empty-text {
    font-size: 14px;
}

/* 响应式调整 */
@media (max-width: 768px) {
    .heatmap-controls {
        flex-wrap: wrap;
    }
    
    .heatmap-summary {
        flex-wrap: wrap;
        gap: 16px;
    }
    
    .heatmap-cell {
        width: 40px;
        height: 40px;
    }
    
    .heatmap-error-answers {
        grid-template-columns: 1fr;
    }
    
    .heatmap-legend {
        flex-wrap: wrap;
        justify-content: flex-start;
    }
}


/* ========== 日报区 (US-14) ========== */
.reports-section {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 20px;
    margin-top: 20px;
}

.reports-section .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.reports-controls {
    display: flex;
    gap: 12px;
    align-items: center;
}

.reports-list {
    min-height: 200px;
}

.reports-list-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* 日报列表项 */
.report-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.15s ease;
}

.report-item:hover {
    background: var(--bg-card-hover);
    box-shadow: var(--shadow-sm);
}

.report-item-left {
    display: flex;
    align-items: center;
    gap: 16px;
}

.report-date {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    min-width: 100px;
}

.report-stats {
    display: flex;
    gap: 20px;
    align-items: center;
}

.report-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.report-stat-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.report-stat-label {
    font-size: 11px;
    color: var(--text-muted);
}

.report-item-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

.report-badge {
    padding: 4px 10px;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 500;
}

.report-badge.auto {
    background: var(--status-processing-bg);
    color: var(--status-processing-text);
}

.report-badge.manual {
    background: var(--status-completed-bg);
    color: var(--status-completed-text);
}

.report-accuracy {
    font-size: 16px;
    font-weight: 600;
}

.report-accuracy.good {
    color: var(--status-completed-text);
}

.report-accuracy.warning {
    color: #e65100;
}

.report-accuracy.bad {
    color: var(--status-failed-text);
}

.report-change {
    font-size: 12px;
    padding: 2px 6px;
    border-radius: var(--radius-sm);
}

.report-change.up {
    background: var(--status-completed-bg);
    color: var(--status-completed-text);
}

.report-change.down {
    background: var(--status-failed-bg);
    color: var(--status-failed-text);
}

.report-change.stable {
    background: var(--status-pending-bg);
    color: var(--status-pending-text);
}

/* 日报骨架屏 */
.reports-skeleton {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.report-item-skeleton {
    height: 72px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
    border-radius: var(--radius-sm);
}

/* 日报分页 */
.reports-pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-light);
}

/* 日报详情弹窗 */
.report-detail-modal {
    max-width: 700px;
    max-height: 85vh;
}

.report-detail-body {
    max-height: 60vh;
    overflow-y: auto;
}

.report-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border-light);
}

.report-detail-date {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
}

.report-detail-badge {
    padding: 6px 12px;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 500;
    background: var(--status-processing-bg);
    color: var(--status-processing-text);
}

/* AI总结区 */
.report-summary-section {
    margin-bottom: 20px;
}

.report-section-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 10px;
}

.report-ai-summary {
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    font-size: 14px;
    line-height: 1.6;
    color: var(--text-secondary);
}

/* 统计数据网格 */
.report-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-bottom: 20px;
}

.report-stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    text-align: center;
}

.report-stat-item .report-stat-value {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
}

.report-stat-item .report-stat-label {
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 4px;
}

/* 错误类型列表 */
.report-errors-section,
.report-new-errors-section,
.report-high-freq-section,
.report-anomalies-section {
    margin-bottom: 20px;
}

.report-errors-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.report-error-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 14px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

.report-error-type {
    font-size: 14px;
    color: var(--text-primary);
}

.report-error-count {
    font-size: 14px;
    font-weight: 600;
    color: var(--status-failed-text);
}

/* 新增错误类型 */
.report-new-errors-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.report-new-error-tag {
    padding: 6px 12px;
    background: #fff3e0;
    color: #e65100;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 500;
}

/* 高频错误题目 */
.report-high-freq-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.report-high-freq-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 14px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

.report-high-freq-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.report-high-freq-index {
    font-weight: 600;
    color: var(--text-primary);
}

.report-high-freq-book {
    font-size: 12px;
    color: var(--text-muted);
}

.report-high-freq-count {
    font-size: 14px;
    font-weight: 600;
    color: var(--status-failed-text);
}

/* 异常情况 */
.report-anomalies-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.report-anomaly-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    background: var(--status-failed-bg);
    border-radius: var(--radius-sm);
}

.report-anomaly-icon {
    width: 20px;
    height: 20px;
    color: var(--status-failed-text);
}

.report-anomaly-message {
    font-size: 14px;
    color: var(--status-failed-text);
}

/* 空状态 */
.reports-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    color: var(--text-muted);
}

.reports-empty-icon {
    width: 48px;
    height: 48px;
    margin-bottom: 12px;
    opacity: 0.5;
}

.reports-empty-text {
    font-size: 14px;
}

/* 响应式调整 */
@media (max-width: 768px) {
    .reports-section .section-header {
        flex-direction: column;
        gap: 12px;
        align-items: flex-start;
    }
    
    .report-item {
        flex-direction: column;
        gap: 12px;
        align-items: flex-start;
    }
    
    .report-item-left {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
    
    .report-stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .report-detail-modal {
        max-width: 95%;
    }
}


/* ========== 趋势分析区 (US-15) ========== */
.trends-section {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 20px;
    margin-bottom: 20px;
}

.trends-section .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    flex-wrap: wrap;
    gap: 12px;
}

.trends-controls {
    display: flex;
    gap: 10px;
    align-items: center;
    flex-wrap: wrap;
}

.trends-controls .form-select {
    min-width: 100px;
}

/* 趋势图容器 */
.trends-chart-container {
    position: relative;
    min-height: 300px;
    margin-bottom: 20px;
}

.trends-skeleton {
    display: flex;
    flex-direction: column;
    gap: 20px;
    padding: 40px;
}

.trends-skeleton .skeleton-line {
    height: 20px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 4px;
}

.trends-skeleton .skeleton-line:nth-child(1) { width: 100%; }
.trends-skeleton .skeleton-line:nth-child(2) { width: 80%; }
.trends-skeleton .skeleton-line:nth-child(3) { width: 60%; }

.trends-content {
    width: 100%;
}

#trendsCanvas {
    width: 100%;
    max-width: 100%;
    height: auto;
}

/* 响应式 */
@media (max-width: 768px) {
    .trends-controls {
        width: 100%;
        justify-content: flex-start;
    }
    
    .trends-controls .form-select {
        flex: 1;
        min-width: 80px;
    }
    
    .trends-controls .btn {
        flex: 1;
    }
    
    #trendsCanvas {
        height: 200px;
    }
}


/* ========== 测试计划流程图组件 ========== */

/* 测试计划区域 */
.plan-section {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 20px;
    display: flex;
    flex-direction: column;
    min-height: 400px;
}

.plan-controls {
    display: flex;
    gap: 8px;
    align-items: center;
}

.plan-filter {
    padding: 6px 12px;
    background: var(--bg-page);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
    font-size: 12px;
    color: var(--text-primary);
    cursor: pointer;
    outline: none;
}

.plan-filter:focus {
    border-color: var(--text-primary);
}

.plan-list {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

/* 测试计划卡片 */
.plan-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    padding: 20px;
    transition: all 0.2s ease;
}

.plan-card:hover {
    border-color: var(--border-color);
    box-shadow: var(--shadow-sm);
}

.plan-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}

.plan-card-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 10px;
}

.plan-card-actions {
    display: flex;
    gap: 8px;
}

.plan-action-btn {
    width: 32px;
    height: 32px;
    background: var(--bg-page);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    transition: all 0.15s ease;
}

.plan-action-btn:hover {
    background: var(--bg-card-hover);
    color: var(--text-primary);
    border-color: var(--border-color);
}

/* 计划状态标签 */
.plan-status {
    padding: 4px 10px;
    border-radius: var(--radius-full);
    font-size: 11px;
    font-weight: 500;
}

.plan-status.draft {
    background: var(--status-pending-bg);
    color: var(--status-pending-text);
}

.plan-status.active {
    background: var(--status-processing-bg);
    color: var(--status-processing-text);
}

.plan-status.completed {
    background: var(--status-completed-bg);
    color: var(--status-completed-text);
}

.plan-status.archived {
    background: #f5f5f7;
    color: #86868b;
}

/* 流程图容器 */
.workflow-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 0;
    margin-bottom: 16px;
}

/* 流程节点 */
.workflow-node {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 16px 20px;
    background: var(--bg-page);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 100px;
    position: relative;
}

.workflow-node:hover {
    border-color: var(--text-primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

.workflow-node-icon {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
}

.workflow-node-label {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
}

.workflow-node-info {
    font-size: 11px;
    color: var(--text-muted);
    text-align: center;
}

/* 节点状态样式 */
.workflow-node.pending {
    border-color: var(--border-color);
}

.workflow-node.pending .workflow-node-icon {
    background: var(--bg-page);
    color: var(--text-muted);
}

.workflow-node.running {
    border-color: var(--status-processing-text);
    background: var(--status-processing-bg);
}

.workflow-node.running .workflow-node-icon {
    background: var(--status-processing-text);
    color: #fff;
    animation: pulse-node 2s infinite;
}

.workflow-node.completed {
    border-color: var(--status-completed-text);
}

.workflow-node.completed .workflow-node-icon {
    background: var(--status-completed-text);
    color: #fff;
}

.workflow-node.failed {
    border-color: var(--status-failed-text);
    background: var(--status-failed-bg);
}

.workflow-node.failed .workflow-node-icon {
    background: var(--status-failed-text);
    color: #fff;
}

@keyframes pulse-node {
    0%, 100% { 
        box-shadow: 0 0 0 0 rgba(21, 101, 192, 0.4);
    }
    50% { 
        box-shadow: 0 0 0 8px rgba(21, 101, 192, 0);
    }
}

/* 流程连接线 */
.workflow-arrow {
    flex: 1;
    height: 2px;
    background: var(--border-color);
    position: relative;
    margin: 0 8px;
    max-width: 60px;
}

.workflow-arrow::after {
    content: '';
    position: absolute;
    right: -6px;
    top: -4px;
    width: 0;
    height: 0;
    border-left: 8px solid var(--border-color);
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
}

.workflow-arrow.active {
    background: var(--status-processing-text);
}

.workflow-arrow.active::after {
    border-left-color: var(--status-processing-text);
}

.workflow-arrow.completed {
    background: var(--status-completed-text);
}

.workflow-arrow.completed::after {
    border-left-color: var(--status-completed-text);
}

/* 计划底部信息 */
.plan-card-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 16px;
    border-top: 1px solid var(--border-light);
}

.plan-stats {
    display: flex;
    gap: 20px;
    font-size: 13px;
}

.plan-stat {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--text-secondary);
}

.plan-stat-value {
    font-weight: 600;
    color: var(--text-primary);
}

.plan-stat-value.accuracy {
    color: var(--status-completed-text);
}

.plan-stat-value.low-accuracy {
    color: var(--status-failed-text);
}

.plan-card-buttons {
    display: flex;
    gap: 8px;
}

/* 进度条 */
.plan-progress {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.plan-progress-bar {
    flex: 1;
    height: 8px;
    background: var(--bg-page);
    border-radius: 4px;
    overflow: hidden;
}

.plan-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #10a37f, #1e7e34);
    border-radius: 4px;
    transition: width 0.5s ease;
}

.plan-progress-text {
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    white-space: nowrap;
}

/* 计划骨架屏 */
.plan-skeleton {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.plan-card-skeleton {
    height: 200px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: var(--radius-md);
}

/* 空状态 */
.plan-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    color: var(--text-muted);
}

.plan-empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.5;
}

.plan-empty-text {
    font-size: 14px;
    margin-bottom: 20px;
}

/* 节点详情弹窗 */
.workflow-node-modal {
    max-width: 500px;
}

.node-detail-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border-light);
}

.node-detail-icon {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
}

.node-detail-icon.pending {
    background: var(--bg-page);
    color: var(--text-muted);
}

.node-detail-icon.running {
    background: var(--status-processing-text);
    color: #fff;
}

.node-detail-icon.completed {
    background: var(--status-completed-text);
    color: #fff;
}

.node-detail-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

.node-detail-status {
    font-size: 13px;
    color: var(--text-muted);
}

/* 节点详情列表 */
.node-detail-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.node-detail-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

.node-detail-item-label {
    font-size: 13px;
    color: var(--text-muted);
}

.node-detail-item-value {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

/* 数据集列表 */
.node-dataset-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    max-height: 200px;
    overflow-y: auto;
}

.node-dataset-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    font-size: 13px;
}

.node-dataset-item .check-icon {
    color: var(--status-completed-text);
}

.node-dataset-item .dataset-name {
    flex: 1;
    color: var(--text-primary);
}

.node-dataset-item .dataset-count {
    color: var(--text-muted);
}

/* 评估进度 */
.node-progress-section {
    margin-bottom: 20px;
}

.node-progress-bar {
    height: 12px;
    background: var(--bg-page);
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 8px;
}

.node-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #1565c0, #10a37f);
    border-radius: 6px;
    transition: width 0.5s ease;
}

.node-progress-text {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: var(--text-muted);
}

/* 错误分布 */
.node-error-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.node-error-item {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 13px;
}

.node-error-type {
    flex: 1;
    color: var(--text-secondary);
}

.node-error-count {
    font-weight: 500;
    color: var(--status-failed-text);
}

/* 创建计划弹窗 */
.create-plan-modal {
    max-width: 500px;
}

/* 响应式 */
@media (max-width: 768px) {
    .workflow-container {
        flex-wrap: wrap;
        gap: 12px;
    }
    
    .workflow-node {
        min-width: 80px;
        padding: 12px 16px;
    }
    
    .workflow-arrow {
        display: none;
    }
    
    .plan-card-footer {
        flex-direction: column;
        gap: 12px;
        align-items: flex-start;
    }
    
    .plan-stats {
        flex-wrap: wrap;
    }
}


/* ========== 增强版创建计划弹窗样式 (Task 10, 14) ========== */
.create-plan-modal {
    max-width: 600px;
}

/* 表单分区 */
.form-section {
    margin-bottom: 24px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--border-light);
}

.form-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.form-section-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 16px;
}

/* 可折叠分区 */
.form-section.collapsible .form-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    padding: 8px 0;
    margin: -8px 0;
}

.form-section.collapsible .form-section-header:hover {
    opacity: 0.8;
}

.form-section.collapsible .collapse-icon {
    transition: transform 0.2s ease;
    color: var(--text-muted);
}

.form-section.collapsible.expanded .collapse-icon {
    transform: rotate(180deg);
}

.form-section-content {
    padding-top: 16px;
}

/* 输入框带按钮 */
.input-with-button {
    display: flex;
    gap: 8px;
}

.input-with-button .form-input {
    flex: 1;
}

.input-with-button .btn-sm {
    padding: 8px 12px;
    font-size: 12px;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 4px;
}

/* 输入框带后缀 */
.input-with-suffix {
    display: flex;
    align-items: center;
}

.input-with-suffix .form-input {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    flex: 1;
}

.input-suffix {
    padding: 10px 12px;
    background: var(--bg-page);
    border: 1px solid var(--border-color);
    border-left: none;
    border-radius: 0 8px 8px 0;
    font-size: 13px;
    color: var(--text-muted);
}

/* 匹配预览容器 */
.match-preview-container {
    margin-top: 16px;
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-light);
}

.match-preview-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
}

.match-preview-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
}

.match-preview-count {
    font-size: 12px;
    padding: 2px 8px;
    background: var(--status-completed-bg);
    color: var(--status-completed-text);
    border-radius: var(--radius-full);
}

.match-preview-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 16px;
}

.match-stat-item {
    text-align: center;
    padding: 12px;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
}

.match-stat-value {
    display: block;
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.match-stat-label {
    font-size: 11px;
    color: var(--text-muted);
}

.match-preview-list {
    max-height: 200px;
    overflow-y: auto;
}

.match-preview-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
    font-size: 13px;
}

.match-preview-item:last-child {
    margin-bottom: 0;
}

.match-preview-item-content {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--text-primary);
}

.match-preview-item-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

.match-preview-item-count {
    font-size: 12px;
    color: var(--text-muted);
}

.match-preview-item-progress {
    font-size: 11px;
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--status-processing-bg);
    color: var(--status-processing-text);
}

.match-preview-item-progress.complete {
    background: var(--status-completed-bg);
    color: var(--status-completed-text);
}

/* 匹配预览加载状态 */
.match-preview-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    color: var(--text-muted);
    font-size: 13px;
}

.match-preview-loading::before {
    content: '';
    width: 16px;
    height: 16px;
    border: 2px solid var(--border-color);
    border-top-color: var(--text-primary);
    border-radius: 50%;
    margin-right: 8px;
    animation: spin 1s linear infinite;
}

/* 匹配预览空状态 */
.match-preview-empty {
    text-align: center;
    padding: 24px;
    color: var(--text-muted);
    font-size: 13px;
}

/* 匹配预览项 - 增强版 */
.match-preview-item {
    display: flex;
    flex-direction: column;
    padding: 12px;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
    border: 1px solid var(--border-light);
    transition: all 0.15s ease;
}

.match-preview-item:hover {
    border-color: var(--border-color);
}

.match-preview-item.completed {
    border-left: 3px solid #1e7e34;
}

.match-preview-item.pending {
    border-left: 3px solid #e65100;
}

.match-item-main {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
}

.match-item-content {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.match-item-book {
    font-size: 11px;
    color: var(--text-muted);
    margin-left: 8px;
    flex-shrink: 0;
}

.match-item-meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.match-item-homework {
    font-size: 12px;
    color: var(--text-secondary);
}

.match-item-status {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    padding: 2px 8px;
    border-radius: var(--radius-full);
}

.match-item-status.completed {
    background: #e3f9e5;
    color: #1e7e34;
}

.match-item-status.pending {
    background: #fff3e0;
    color: #e65100;
}

.match-item-status svg {
    width: 12px;
    height: 12px;
}

/* 匹配预览摘要 */
.match-preview-summary {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px;
    border-radius: var(--radius-sm);
    font-size: 13px;
    margin-top: 12px;
}

.match-preview-summary.success {
    background: #e3f9e5;
    color: #1e7e34;
}

.match-preview-summary.warning {
    background: #fff3e0;
    color: #e65100;
}

.match-preview-summary svg {
    flex-shrink: 0;
}

/* 加载中按钮状态 */
.loading-spinner {
    display: inline-block;
    width: 14px;
    height: 14px;
    border: 2px solid currentColor;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-right: 6px;
}

/* Toggle 开关 */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
    vertical-align: middle;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--border-color);
    transition: 0.3s;
    border-radius: 24px;
}

.toggle-slider::before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.toggle-switch input:checked + .toggle-slider {
    background-color: var(--status-completed-text);
}

.toggle-switch input:checked + .toggle-slider::before {
    transform: translateX(20px);
}


/* ========== 测试计划卡片工作流样式 (Task 11, 14) ========== */

/* 工作流进度条 - 四步骤 */
.workflow-progress-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 0;
    position: relative;
}

.workflow-progress-bar::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 40px;
    right: 40px;
    height: 2px;
    background: var(--border-light);
    transform: translateY(-50%);
    z-index: 0;
}

.workflow-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    position: relative;
    z-index: 1;
    cursor: pointer;
    transition: all 0.2s ease;
}

.workflow-step:hover {
    transform: translateY(-2px);
}

.workflow-step-icon {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-card);
    border: 2px solid var(--border-color);
    color: var(--text-muted);
    transition: all 0.2s ease;
}

.workflow-step.not_started .workflow-step-icon {
    background: var(--bg-page);
    border-color: var(--border-color);
    color: var(--text-muted);
}

.workflow-step.in_progress .workflow-step-icon {
    background: var(--status-processing-bg);
    border-color: var(--status-processing-text);
    color: var(--status-processing-text);
    animation: pulse-border 2s ease-in-out infinite;
}

.workflow-step.completed .workflow-step-icon {
    background: var(--status-completed-bg);
    border-color: var(--status-completed-text);
    color: var(--status-completed-text);
}

.workflow-step.failed .workflow-step-icon {
    background: var(--status-failed-bg);
    border-color: var(--status-failed-text);
    color: var(--status-failed-text);
}

@keyframes pulse-border {
    0%, 100% { box-shadow: 0 0 0 0 rgba(21, 101, 192, 0.4); }
    50% { box-shadow: 0 0 0 6px rgba(21, 101, 192, 0); }
}

.workflow-step-label {
    font-size: 12px;
    color: var(--text-muted);
    text-align: center;
    max-width: 80px;
}

.workflow-step.completed .workflow-step-label,
.workflow-step.in_progress .workflow-step-label {
    color: var(--text-primary);
    font-weight: 500;
}

/* 工作流连接线 */
.workflow-connector {
    flex: 1;
    height: 2px;
    background: var(--border-light);
    position: relative;
    z-index: 0;
    margin: 0 -8px;
    margin-top: -24px;
}

.workflow-connector.completed {
    background: var(--status-completed-text);
}

.workflow-connector.in_progress {
    background: linear-gradient(90deg, var(--status-completed-text) 50%, var(--border-light) 50%);
    background-size: 200% 100%;
    animation: progress-flow 1.5s linear infinite;
}

@keyframes progress-flow {
    0% { background-position: 100% 0; }
    100% { background-position: 0 0; }
}

/* 计划卡片统计概览 */
.plan-card-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin: 16px 0;
}

.plan-stat-item {
    text-align: center;
}

.plan-stat-item .stat-value {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 2px;
}

.plan-stat-item .stat-label {
    font-size: 11px;
    color: var(--text-muted);
}

.plan-stat-item .stat-value.warning {
    color: #e65100;
}

.plan-stat-item .stat-value.danger {
    color: var(--status-failed-text);
}

.plan-stat-item .stat-value.success {
    color: var(--status-completed-text);
}

/* 步骤详情展开区域 */
.step-details-container {
    overflow: hidden;
    max-height: 0;
    transition: max-height 0.3s ease;
}

.step-details-container.expanded {
    max-height: 500px;
}

.step-details {
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-top: 12px;
}

.step-details-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
}

.step-details-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.step-details-status {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: var(--radius-full);
}

.step-details-status.not_started {
    background: var(--status-pending-bg);
    color: var(--status-pending-text);
}

.step-details-status.in_progress {
    background: var(--status-processing-bg);
    color: var(--status-processing-text);
}

.step-details-status.completed {
    background: var(--status-completed-bg);
    color: var(--status-completed-text);
}

.step-details-status.failed {
    background: var(--status-failed-bg);
    color: var(--status-failed-text);
}

.step-details-content {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.6;
}

.step-details-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.step-details-list li {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 0;
    border-bottom: 1px solid var(--border-light);
}

.step-details-list li:last-child {
    border-bottom: none;
}

.step-details-list .detail-label {
    color: var(--text-muted);
    min-width: 80px;
}

.step-details-list .detail-value {
    color: var(--text-primary);
    font-weight: 500;
}

/* 展开/收起按钮 */
.expand-details-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    width: 100%;
    padding: 8px;
    background: transparent;
    border: 1px dashed var(--border-color);
    border-radius: var(--radius-sm);
    font-size: 12px;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.15s ease;
    margin-top: 12px;
}

.expand-details-btn:hover {
    background: var(--bg-page);
    border-color: var(--text-muted);
    color: var(--text-primary);
}

.expand-details-btn svg {
    transition: transform 0.2s ease;
}

.expand-details-btn.expanded svg {
    transform: rotate(180deg);
}

/* 计划卡片操作按钮组 */
.plan-card-actions-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 16px;
    border-top: 1px solid var(--border-light);
    margin-top: 16px;
}

.plan-card-actions-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.plan-card-actions-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* 刷新状态按钮 */
.btn-refresh {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    font-size: 12px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.15s ease;
}

.btn-refresh:hover {
    background: var(--bg-page);
    border-color: var(--text-muted);
}

.btn-refresh.loading svg {
    animation: spin 1s linear infinite;
}

/* 执行工作流按钮 */
.btn-execute {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: var(--text-primary);
    border: none;
    border-radius: var(--radius-sm);
    font-size: 13px;
    font-weight: 500;
    color: #fff;
    cursor: pointer;
    transition: all 0.15s ease;
}

.btn-execute:hover {
    background: #000;
    transform: translateY(-1px);
}

.btn-execute:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

/* AI 按钮样式 */
.btn-ai {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 500;
    color: #fff;
    cursor: pointer;
    transition: all 0.15s ease;
}

.btn-ai:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

/* 加载状态和骨架屏 (Task 15) */
.plan-card-skeleton {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 20px;
    margin-bottom: 16px;
}

.skeleton-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
}

.skeleton-title {
    width: 200px;
    height: 20px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 4px;
}

.skeleton-badge {
    width: 60px;
    height: 20px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 10px;
}

.skeleton-workflow {
    display: flex;
    justify-content: space-between;
    padding: 20px 0;
}

.skeleton-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.skeleton-step-icon {
    width: 36px;
    height: 36px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 50%;
}

.skeleton-step-label {
    width: 60px;
    height: 12px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 4px;
}

.skeleton-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

.skeleton-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.skeleton-stat-value {
    width: 40px;
    height: 18px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 4px;
}

.skeleton-stat-label {
    width: 50px;
    height: 10px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 4px;
}

/* 错误提示样式 */
.error-message {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    background: var(--status-failed-bg);
    border: 1px solid rgba(215, 58, 73, 0.2);
    border-radius: var(--radius-sm);
    color: var(--status-failed-text);
    font-size: 13px;
    margin-bottom: 16px;
}

.error-message svg {
    flex-shrink: 0;
}

/* 轮询状态指示器 */
.polling-indicator {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--text-muted);
    padding: 4px 8px;
    background: var(--bg-page);
    border-radius: var(--radius-full);
}

.polling-indicator::before {
    content: '';
    width: 6px;
    height: 6px;
    background: var(--status-processing-text);
    border-radius: 50%;
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
}

/* 响应式调整 */
@media (max-width: 768px) {
    .create-plan-modal {
        max-width: 100%;
        margin: 16px;
    }
    
    .match-preview-stats {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .plan-card-stats {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .workflow-progress-bar {
        flex-wrap: wrap;
        gap: 16px;
    }
    
    .workflow-progress-bar::before {
        display: none;
    }
    
    .workflow-connector {
        display: none;
    }
    
    .workflow-step {
        flex: 0 0 calc(50% - 8px);
    }
}


/* ========== 高级分析工具区 ========== */
/* 第一行布局：测试计划(70%) + 高级工具(30%) */
.dashboard-row-1 {
    display: flex;
    gap: 20px;
    padding: 0 24px;
    margin-bottom: 20px;
}

.dashboard-row-1 .plan-section {
    flex: 0 0 70%;
    max-width: 70%;
}

.dashboard-row-1 .advanced-tools-section {
    flex: 0 0 calc(30% - 20px);
    max-width: calc(30% - 20px);
    background: var(--bg-card);
    border-radius: var(--radius-md);
    padding: 16px;
}

/* 第二行布局：热点图(70%) + 数据集/学科(30%) */
.dashboard-row-2 {
    display: flex;
    gap: 20px;
    padding: 0 24px;
    margin-bottom: 20px;
}

.dashboard-row-2 .heatmap-section {
    flex: 0 0 70%;
    max-width: 70%;
}

.dashboard-row-2 .right-panel {
    flex: 0 0 calc(30% - 20px);
    max-width: calc(30% - 20px);
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* 第三行布局：日报(70%) + 趋势(30%) */
.dashboard-row-3 {
    display: flex;
    gap: 20px;
    padding: 0 24px 24px;
    margin-bottom: 20px;
}

.dashboard-row-3 .reports-section {
    flex: 0 0 70%;
    max-width: 70%;
}

.dashboard-row-3 .trends-section {
    flex: 0 0 calc(30% - 20px);
    max-width: calc(30% - 20px);
}

/* ========== 高级分析工具 - 黑白高级感设计 ========== */
.tools-grid-vertical {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.tool-card {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    background: #fafafa;
    border: 1px solid #e5e5e5;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.tool-card:hover {
    background: #fff;
    border-color: #1d1d1f;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}

.tool-card-icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #1d1d1f;
    border-radius: 8px;
    color: #fff;
    flex-shrink: 0;
}

.tool-card-icon.warning {
    background: #1d1d1f;
}

.tool-card-content {
    flex: 1;
    min-width: 0;
}

.tool-card-name {
    font-size: 13px;
    font-weight: 600;
    color: #1d1d1f;
    margin-bottom: 2px;
}

.tool-card-desc {
    font-size: 11px;
    color: #86868b;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.tool-card-badge {
    min-width: 20px;
    height: 20px;
    padding: 0 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f5f5f7;
    border-radius: 10px;
    font-size: 11px;
    font-weight: 600;
    color: #86868b;
    flex-shrink: 0;
}

.tool-card-badge.warning {
    background: #1d1d1f;
    color: #fff;
}

/* 响应式调整 */
@media (max-width: 1400px) {
    .tools-grid-vertical {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 1200px) {
    .dashboard-row-1,
    .dashboard-row-2,
    .dashboard-row-3 {
        flex-direction: column;
    }
    
    .dashboard-row-1 .plan-section,
    .dashboard-row-1 .advanced-tools-section,
    .dashboard-row-2 .heatmap-section,
    .dashboard-row-2 .right-panel,
    .dashboard-row-3 .reports-section,
    .dashboard-row-3 .trends-section {
        flex: 1;
        max-width: 100%;
    }
    
    .tools-grid-vertical {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
    }
}

@media (max-width: 768px) {
    .tools-grid-vertical {
        grid-template-columns: repeat(2, 1fr);
    }
}


/* ========== 高级分析工具弹窗样式 ========== */

/* 弹窗尺寸 */
.modal-lg {
    max-width: 800px;
}

.modal-md {
    max-width: 600px;
}

/* 统计卡片行 */
.stats-row {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
}

.stat-card-mini {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    text-align: center;
}

.stat-card-mini.warning {
    background: #fff3e0;
}

.stat-card-mini .stat-value {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
}

.stat-card-mini.warning .stat-value {
    color: #e65100;
}

.stat-card-mini .stat-label {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 4px;
}

/* 筛选器行 */
.filter-row {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
}

.form-select-sm {
    padding: 8px 12px;
    font-size: 13px;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    background: #fff;
    color: var(--text-primary);
    outline: none;
    min-width: 120px;
}

.form-select-sm:focus {
    border-color: var(--text-primary);
}

/* 样本列表 */
.sample-list {
    max-height: 400px;
    overflow-y: auto;
}

.sample-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.15s ease;
}

.sample-item:hover {
    background: var(--bg-card-hover);
}

.sample-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.sample-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.sample-meta {
    font-size: 12px;
    color: var(--text-muted);
}

.sample-stats {
    display: flex;
    align-items: center;
    gap: 12px;
}

.sample-accuracy {
    font-size: 14px;
    font-weight: 600;
    color: var(--status-completed-text);
}

.sample-accuracy.low {
    color: var(--status-failed-text);
}

.sample-errors {
    font-size: 12px;
    color: var(--status-failed-text);
    padding: 2px 8px;
    background: var(--status-failed-bg);
    border-radius: var(--radius-sm);
}

/* 异常列表 */
.anomaly-list {
    max-height: 400px;
    overflow-y: auto;
}

.anomaly-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
}

.anomaly-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 600;
    background: var(--status-pending-bg);
    color: var(--status-pending-text);
}

.anomaly-icon.warning {
    background: #fff3e0;
    color: #e65100;
}

.anomaly-info {
    flex: 1;
}

.anomaly-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.anomaly-desc {
    font-size: 12px;
    color: var(--text-muted);
}

/* 聚类列表 */
.cluster-list {
    max-height: 400px;
    overflow-y: auto;
}

.cluster-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
}

.cluster-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.cluster-count {
    font-size: 13px;
    color: var(--status-failed-text);
    font-weight: 500;
}

/* 建议列表 */
.suggestion-list {
    max-height: 400px;
    overflow-y: auto;
}

.suggestion-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
}

.suggestion-priority {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 600;
    background: var(--status-pending-bg);
    color: var(--status-pending-text);
}

.suggestion-priority.high {
    background: var(--status-failed-bg);
    color: var(--status-failed-text);
}

.suggestion-priority.medium {
    background: #fff3e0;
    color: #e65100;
}

.suggestion-content {
    flex: 1;
}

.suggestion-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.suggestion-desc {
    font-size: 12px;
    color: var(--text-muted);
}

/* 批次对比 */
.compare-selector {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 24px;
}

.compare-select-group {
    flex: 1;
}

.compare-select-group .form-label {
    margin-bottom: 8px;
}

.compare-vs {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-muted);
    padding-top: 24px;
}

.compare-result {
    padding: 20px;
    background: var(--bg-page);
    border-radius: var(--radius-md);
}

.compare-summary {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 24px;
    margin-bottom: 24px;
}

.compare-card {
    text-align: center;
    padding: 16px 24px;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    min-width: 120px;
}

.compare-card-title {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 8px;
}

.compare-card-value {
    font-size: 28px;
    font-weight: 600;
    color: var(--text-primary);
}

.compare-card-label {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 4px;
}

.compare-diff {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.diff-arrow {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-muted);
}

.diff-arrow.up {
    color: var(--status-completed-text);
}

.diff-arrow.down {
    color: var(--status-failed-text);
}

.diff-value {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
}

.compare-error-changes h4 {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 12px;
}

.error-change-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    background: var(--bg-card);
    border-radius: var(--radius-sm);
    margin-bottom: 6px;
}

.error-change-item.improved {
    background: var(--status-completed-bg);
}

.error-change-item.worsened {
    background: var(--status-failed-bg);
}

.error-type {
    font-size: 13px;
    color: var(--text-primary);
}

.error-change {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
}

.error-change-item.improved .error-change {
    color: var(--status-completed-text);
}

.error-change-item.worsened .error-change {
    color: var(--status-failed-text);
}

/* 数据下钻 */
.drilldown-nav {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
}

.drilldown-nav-btn {
    padding: 8px 16px;
    background: var(--bg-page);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-full);
    font-size: 13px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.15s ease;
}

.drilldown-nav-btn:hover {
    background: var(--bg-card-hover);
}

.drilldown-nav-btn.active {
    background: var(--text-primary);
    color: #fff;
    border-color: var(--text-primary);
}

.drilldown-breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 16px;
    padding: 8px 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

.breadcrumb-item {
    color: var(--text-muted);
}

.breadcrumb-item.active {
    color: var(--text-primary);
    font-weight: 500;
}

.drilldown-list {
    max-height: 400px;
    overflow-y: auto;
}

.drilldown-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.15s ease;
}

.drilldown-item:hover {
    background: var(--bg-card-hover);
}

.drilldown-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.drilldown-stats {
    display: flex;
    align-items: center;
    gap: 16px;
}

.drilldown-accuracy {
    font-size: 14px;
    font-weight: 600;
}

.drilldown-accuracy.high {
    color: var(--status-completed-text);
}

.drilldown-accuracy.medium {
    color: #e65100;
}

.drilldown-accuracy.low {
    color: var(--status-failed-text);
}

.drilldown-count {
    font-size: 12px;
    color: var(--text-muted);
}

.drilldown-errors {
    font-size: 12px;
    color: var(--status-failed-text);
}

.drilldown-arrow {
    font-size: 14px;
    color: var(--text-muted);
}

/* 空状态 */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    color: var(--text-muted);
    font-size: 14px;
}

/* 响应式 */
@media (max-width: 768px) {
    .modal-lg,
    .modal-md {
        max-width: 95%;
    }
    
    .stats-row {
        flex-wrap: wrap;
    }
    
    .stat-card-mini {
        min-width: calc(50% - 6px);
    }
    
    .compare-selector {
        flex-direction: column;
    }
    
    .compare-vs {
        padding-top: 0;
    }
    
    .compare-summary {
        flex-direction: column;
        gap: 16px;
    }
    
    .drilldown-nav {
        flex-wrap: wrap;
    }
}


/* ========== AI 分析报告弹窗 ========== */
.analysis-status {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    gap: 16px;
    color: var(--text-secondary);
}

.analysis-section {
    margin-bottom: 24px;
}

.analysis-section-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-light);
}

.analysis-summary .summary-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
}

.analysis-drilldown .drilldown-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
}

.drilldown-tab {
    padding: 6px 12px;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-full);
    background: transparent;
    color: var(--text-secondary);
    font-size: 13px;
    cursor: pointer;
    transition: all 0.15s ease;
}

.drilldown-tab:hover {
    background: var(--bg-page);
}

.drilldown-tab.active {
    background: var(--text-primary);
    color: #fff;
    border-color: var(--text-primary);
}

.drilldown-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.drilldown-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    transition: all 0.15s ease;
}

.drilldown-item:hover {
    background: var(--border-light);
}

.drilldown-item.focus {
    background: var(--status-failed-bg);
    border-left: 3px solid var(--status-failed-text);
}

.drilldown-item .item-name {
    font-size: 14px;
    color: var(--text-primary);
}

.drilldown-item .item-stats {
    display: flex;
    gap: 12px;
    font-size: 13px;
}

.drilldown-item .stat-error {
    color: var(--status-failed-text);
}

.drilldown-item .stat-rate {
    color: var(--text-secondary);
}

.focus-tag, .primary-tag {
    padding: 2px 6px;
    background: var(--status-failed-bg);
    color: var(--status-failed-text);
    font-size: 11px;
    border-radius: var(--radius-sm);
}

/* 错误模式 */
.error-patterns {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 12px;
}

.pattern-card {
    padding: 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--border-color);
}

.pattern-card.severity-high {
    border-left-color: var(--status-failed-text);
}

.pattern-card.severity-medium {
    border-left-color: var(--status-pending-text);
}

.pattern-card.severity-low {
    border-left-color: var(--text-muted);
}

.pattern-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
}

.pattern-type {
    font-size: 13px;
    color: var(--text-primary);
}

.pattern-count {
    font-size: 12px;
    color: var(--text-secondary);
}

.pattern-rate {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

/* 根因分析 */
.causes-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.cause-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

.cause-item.primary {
    background: var(--status-pending-bg);
    border-left: 3px solid var(--status-pending-text);
}

.cause-name {
    font-size: 14px;
    color: var(--text-primary);
}

.cause-stats {
    display: flex;
    gap: 12px;
    font-size: 13px;
    color: var(--text-secondary);
}

/* 优化建议 */
.suggestions-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.suggestion-card {
    padding: 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--border-color);
}

.suggestion-card.priority-high {
    border-left-color: var(--status-failed-text);
}

.suggestion-card.priority-medium {
    border-left-color: var(--status-pending-text);
}

.suggestion-card.priority-low {
    border-left-color: var(--text-muted);
}

.suggestion-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.suggestion-index {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--text-primary);
    color: #fff;
    font-size: 12px;
    font-weight: 600;
    border-radius: 50%;
}

.suggestion-title {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.suggestion-priority {
    padding: 2px 6px;
    font-size: 11px;
    border-radius: var(--radius-sm);
    background: var(--bg-card);
    color: var(--text-secondary);
}

.suggestion-desc {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.5;
}

.suggestion-effect {
    margin-top: 8px;
    font-size: 12px;
    color: var(--status-completed-text);
}

/* ========== 自动化管理弹窗 ========== */
.automation-controls {
    padding: 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
    margin-bottom: 16px;
}

.control-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.control-label {
    font-size: 14px;
    color: var(--text-primary);
}

.control-actions {
    display: flex;
    gap: 8px;
}

.automation-section {
    margin-bottom: 16px;
}

.automation-section .section-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.queue-status {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

.queue-stats {
    display: flex;
    gap: 16px;
}

.queue-stat {
    font-size: 13px;
    color: var(--text-secondary);
}

.queue-stat strong {
    color: var(--text-primary);
}

.automation-tasks {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.automation-task-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px;
    background: var(--bg-page);
    border-radius: var(--radius-sm);
}

.automation-task-item.disabled {
    opacity: 0.6;
}

.task-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.task-name {
    font-size: 14px;
    color: var(--text-primary);
}

.task-desc {
    font-size: 12px;
    color: var(--text-secondary);
}

/* 开关样式 */
.switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 22px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--border-color);
    transition: 0.3s;
    border-radius: 22px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 16px;
    width: 16px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: var(--status-completed-text);
}

input:checked + .slider:before {
    transform: translateX(18px);
}

/* 按钮尺寸 */
.btn-sm {
    padding: 6px 12px;
    font-size: 12px;
}

.btn-warning {
    background: var(--status-pending-bg);
    color: var(--status-pending-text);
    border: 1px solid var(--status-pending-text);
}

.btn-warning:hover {
    background: var(--status-pending-text);
    color: #fff;
}

/* 弹窗尺寸 */
.modal-md .modal-content {
    max-width: 500px;
}

/* ==================== 优化日志组件 ==================== */
.opt-logs-section {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    padding: 0 12px;
    overflow: hidden;
}

.sidebar:not(:hover) .opt-logs-section {
    padding: 0 8px;
}

.opt-logs-section .nav-label {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 0;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.sidebar:hover .opt-logs-section .nav-label {
    opacity: 1;
}

.opt-logs-section .nav-label span {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.add-log-btn {
    width: 24px;
    height: 24px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background: transparent;
    color: var(--text-muted);
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
}

.add-log-btn:hover {
    background: #ffffff;
    color: var(--text-primary);
    border-color: var(--text-muted);
}

.opt-logs-list {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding-bottom: 8px;
}

.sidebar:not(:hover) .opt-logs-list {
    overflow: hidden;
}

.opt-logs-empty {
    padding: 16px 8px;
    text-align: center;
    color: var(--text-muted);
    font-size: 12px;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.sidebar:hover .opt-logs-empty {
    opacity: 1;
}

.opt-log-item {
    display: flex;
    flex-direction: column;
    padding: 10px 12px;
    margin-bottom: 6px;
    border-radius: 8px;
    background: var(--bg-page);
    border-left: 3px solid #9ca3af;
    cursor: pointer;
    transition: all 0.15s;
    position: relative;
    opacity: 0;
    transform: translateX(-10px);
}

.sidebar:hover .opt-log-item {
    opacity: 1;
    transform: translateX(0);
}

.opt-log-item:hover {
    background: #ffffff;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.opt-log-item:hover .opt-log-delete {
    opacity: 1;
}

.opt-log-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
}

.opt-log-date {
    font-size: 11px;
    font-weight: 500;
    color: var(--text-muted);
}

.opt-log-content {
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.5;
}

.opt-log-content .log-item {
    display: block;
    padding: 2px 0;
}

.opt-log-content .log-num {
    color: var(--text-primary);
    font-weight: 500;
    margin-right: 4px;
}

.opt-log-delete {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 18px;
    height: 18px;
    border: none;
    border-radius: 4px;
    background: transparent;
    color: var(--text-muted);
    font-size: 14px;
    cursor: pointer;
    opacity: 0;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.opt-log-delete:hover {
    background: #fef2f2;
    color: #dc2626;
}

/* 不同分类的边框颜色 */
.opt-log-item[data-category="general"] {
    border-left-color: #9ca3af;
}
.opt-log-item[data-category="accuracy"] {
    border-left-color: #10a37f;
}
.opt-log-item[data-category="accuracy"] .opt-log-content .log-num {
    color: #10a37f;
}
.opt-log-item[data-category="performance"] {
    border-left-color: #3b82f6;
}
.opt-log-item[data-category="performance"] .opt-log-content .log-num {
    color: #3b82f6;
}
.opt-log-item[data-category="feature"] {
    border-left-color: #f59e0b;
}
.opt-log-item[data-category="feature"] .opt-log-content .log-num {
    color: #b45309;
}
.opt-log-item[data-category="bugfix"] {
    border-left-color: #ef4444;
}
.opt-log-item[data-category="bugfix"] .opt-log-content .log-num {
    color: #dc2626;
}

/* 弹窗小尺寸 */
.modal-sm {
    max-width: 400px;
}

/* ==================== 全局设置弹窗 ==================== */
.settings-section {
    margin-bottom: 20px;
}

.settings-section:last-child {
    margin-bottom: 0;
}

.settings-section-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.settings-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid var(--border-color);
}

.settings-row:last-child {
    border-bottom: none;
}

.settings-label {
    font-size: 14px;
    color: var(--text-primary);
}

.settings-select {
    padding: 8px 12px;
    background: var(--bg-page);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    font-size: 13px;
    min-width: 140px;
}

.settings-select:focus {
    outline: none;
    border-color: var(--accent-color);
}

.settings-toggle {
    position: relative;
    width: 44px;
    height: 24px;
    background: #d1d5db;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.2s;
}

.settings-toggle.active {
    background: var(--accent-color);
}

.settings-toggle::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 20px;
    height: 20px;
    background: #fff;
    border-radius: 50%;
    transition: transform 0.2s;
}

.settings-toggle.active::after {
    transform: translateX(20px);
}

.loading-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-muted);
    font-size: 14px;
}

/* Update .subject-analysis-section to accommodate flex layout for content */
.subject-content {
    display: flex;
    flex-direction: column;
    gap: 16px;
    flex: 1;
    min-height: 0;
}

.subject-chart-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 220px;
    padding: 10px 0;
    margin-bottom: 8px;
}

/* Improve subject list items */
.subject-item {
    position: relative;
    overflow: hidden;
    padding: 14px 16px;
    background: #fff;
    border: 1px solid rgba(0,0,0,0.04);
    box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}

.subject-item:hover {
    transform: translateX(4px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.06);
    border-color: rgba(0,0,0,0.08);
    z-index: 1;
}

/* Add progress bar to subject item */
.subject-item-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: rgba(0,0,0,0.02);
}

.subject-item-progress-bar {
    height: 100%;
    background: var(--status-completed-text);
    transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.subject-item-progress-bar.warning {
    background: #f59e0b;
}

.subject-item-progress-bar.danger {
    background: #ef4444;
}

.subject-score-badge {
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 600;
    background: rgba(0,0,0,0.04);
    color: var(--text-primary);
    min-width: 48px;
    text-align: center;
}

.subject-score-badge.high {
    background: #e3f9e5;
    color: #1e7e34;
}

.subject-score-badge.medium {
    background: #fff3e0;
    color: #b45309;
}

.subject-score-badge.low {
    background: #ffeef0;
    color: #d73a49;
}


/* ========== RFID查询弹窗样式 ========== */
.rfid-modal .modal-content {
    max-width: 900px;
    width: 90%;
    border-radius: var(--radius-lg);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

.rfid-modal-content {
    max-width: 900px;
    width: 90%;
}

.rfid-modal-body {
    min-height: 450px;
    max-height: 75vh;
    overflow-y: auto;
    padding: 24px;
}

/* 搜索区域 */
.rfid-search-section {
    margin-bottom: 28px;
    padding: 20px 24px;
    background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-light);
}

.rfid-search-box {
    display: flex;
    gap: 12px;
    align-items: center;
}

.rfid-search-box input {
    flex: 1;
    padding: 14px 18px;
    background: #fff;
    border: 2px solid var(--border-color);
    border-radius: var(--radius-md);
    font-size: 15px;
    color: var(--text-primary);
    outline: none;
    transition: all 0.2s ease;
}

.rfid-search-box input:focus {
    border-color: var(--text-primary);
    box-shadow: 0 0 0 3px rgba(29, 29, 31, 0.1);
}

.rfid-search-box input::placeholder {
    color: var(--text-muted);
}

.rfid-search-btn {
    padding: 14px 28px;
    background: var(--text-primary);
    border: none;
    border-radius: var(--radius-md);
    font-size: 14px;
    font-weight: 600;
    color: #fff;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

.rfid-search-btn:hover {
    background: #000;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* 结果区域 */
.rfid-result-section {
    animation: rfidFadeIn 0.4s ease;
}

@keyframes rfidFadeIn {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}

.rfid-result-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.rfid-result-left,
.rfid-result-right {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

/* 信息卡片 */
.rfid-info-card {
    background: #fff;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.rfid-info-card:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    border-color: var(--border-color);
}

.rfid-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    background: linear-gradient(135deg, #f8f9fa 0%, #f5f5f7 100%);
    border-bottom: 1px solid var(--border-light);
}

.rfid-card-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
}

.rfid-card-title::before {
    content: '';
    width: 4px;
    height: 14px;
    background: var(--text-primary);
    border-radius: 2px;
}

.rfid-status-badge {
    padding: 4px 12px;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 600;
}

.rfid-status-badge.valid {
    background: #dcfce7;
    color: #166534;
}

.rfid-status-badge.invalid {
    background: #fee2e2;
    color: #dc2626;
}

.rfid-type-badge {
    padding: 4px 12px;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 600;
    background: #dbeafe;
    color: #1d4ed8;
}

.rfid-type-badge.homework {
    background: #fef3c7;
    color: #d97706;
}

.rfid-type-badge.error-book {
    background: #f3e8ff;
    color: #7c3aed;
}

.rfid-card-body {
    padding: 16px 18px;
}

/* 信息行 */
.rfid-info-row {
    display: flex;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #f0f0f0;
}

.rfid-info-row:last-child {
    border-bottom: none;
}

.rfid-info-label {
    width: 90px;
    flex-shrink: 0;
    font-size: 13px;
    color: var(--text-muted);
    font-weight: 500;
}

.rfid-info-value {
    flex: 1;
    font-size: 14px;
    color: var(--text-primary);
}

.rfid-info-value.highlight {
    font-weight: 600;
    color: var(--text-primary);
}

/* 查看全班按钮 */
.rfid-btn-small {
    padding: 6px 14px;
    background: var(--text-primary);
    border: none;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 500;
    color: #fff;
    cursor: pointer;
    transition: all 0.2s ease;
}

.rfid-btn-small:hover {
    background: #000;
    transform: scale(1.02);
}

/* 老师列表 */
.rfid-teacher-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.rfid-teacher-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    background: #f8f9fa;
    border-radius: var(--radius-sm);
    transition: all 0.15s ease;
}

.rfid-teacher-item:hover {
    background: #f0f0f0;
}

.rfid-teacher-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.rfid-teacher-account {
    font-size: 12px;
    color: var(--text-secondary);
    padding: 2px 8px;
    background: #e8f4fd;
    border-radius: 4px;
    font-family: 'SF Mono', Monaco, Consolas, monospace;
}

.rfid-teacher-subject {
    font-size: 12px;
    color: var(--text-muted);
    padding: 3px 8px;
    background: #fff;
    border-radius: 4px;
    border: 1px solid var(--border-light);
}

/* 班级同学列表 */
.rfid-classmates-section {
    animation: rfidFadeIn 0.4s ease;
}

.rfid-classmates-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 2px solid var(--border-light);
}

.rfid-back-btn {
    padding: 8px 16px;
    background: #fff;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-full);
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.15s ease;
    display: flex;
    align-items: center;
    gap: 6px;
}

.rfid-back-btn:hover {
    background: var(--bg-page);
    border-color: var(--text-primary);
}

.rfid-classmates-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

.rfid-classmates-count {
    font-size: 14px;
    color: var(--text-muted);
    padding: 4px 12px;
    background: var(--bg-page);
    border-radius: var(--radius-full);
}

.rfid-classmates-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 12px;
    max-height: 420px;
    overflow-y: auto;
    padding: 4px;
}

.rfid-classmate-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    background: #fff;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
    cursor: default;
}

.rfid-classmate-item:hover {
    border-color: var(--border-color);
    background: #fafafa;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
}

.rfid-classmate-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--text-primary) 0%, #434343 100%);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 600;
    flex-shrink: 0;
}

.rfid-classmate-info {
    flex: 1;
    min-width: 0;
}

.rfid-classmate-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 2px;
}

.rfid-classmate-num {
    font-size: 12px;
    color: var(--text-muted);
}

/* 空状态 */
.rfid-empty-state,
.rfid-not-found,
.rfid-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 80px 20px;
    color: var(--text-muted);
}

.rfid-empty-state svg,
.rfid-not-found svg {
    opacity: 0.5;
}

.rfid-empty-text,
.rfid-not-found-text,
.rfid-loading-text {
    font-size: 15px;
    margin-top: 16px;
    color: var(--text-secondary);
}

.rfid-not-found-no {
    font-size: 14px;
    color: var(--status-failed-text);
    font-family: 'SF Mono', Monaco, Consolas, monospace;
    margin-top: 10px;
    padding: 6px 14px;
    background: #fef2f2;
    border-radius: var(--radius-sm);
}

/* 加载动画 */
.rfid-spinner {
    width: 36px;
    height: 36px;
    border: 3px solid var(--border-color);
    border-top-color: var(--text-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

/* 无数据提示 */
.rfid-no-data {
    font-size: 13px;
    color: var(--text-muted);
    font-style: italic;
    padding: 8px 0;
}

/* 响应式 */
@media (max-width: 768px) {
    .rfid-modal-content {
        max-width: 95%;
    }
    
    .rfid-result-grid {
        grid-template-columns: 1fr;
    }
    
    .rfid-classmates-list {
        grid-template-columns: repeat(2, 1fr);
    }
}


/* ========== 工作流详情弹窗样式 - 简约高级版 ========== */

/* 主色：#1d1d1f（黑）  辅助色：#10b981（绿）#6b7280（灰）  中性色：#f9fafb/#e5e7eb */

.workflow-node-modal {
    max-width: 520px;
    width: 92%;
}

.workflow-detail {
    display: flex;
    flex-direction: column;
    gap: 24px;
    padding: 4px 0;
}

/* 顶部信息区 - 横向紧凑布局 */
.workflow-info {
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 0;
    background: transparent;
}

.workflow-info .info-row {
    display: flex;
    align-items: center;
    gap: 6px;
}

.workflow-info .info-label {
    color: #9ca3af;
    font-size: 12px;
    font-weight: 400;
}

.workflow-info .info-value {
    color: #1d1d1f;
    font-size: 13px;
    font-weight: 500;
}

/* 进度条区域 - 极简设计 */
.workflow-progress {
    padding: 20px 24px;
    background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
    border-radius: 12px;
}

.workflow-progress .progress-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 12px;
}

.workflow-progress .progress-header span:first-child {
    font-size: 13px;
    font-weight: 500;
    color: #374151;
}

.workflow-progress .progress-header span:last-child {
    font-size: 20px;
    font-weight: 600;
    color: #1d1d1f;
}

.workflow-progress .progress-bar-container {
    height: 6px;
    background: #e5e7eb;
    border-radius: 3px;
    overflow: hidden;
}

.workflow-progress .progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #10b981 0%, #059669 100%);
    border-radius: 3px;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 步骤列表 - 时间线设计 */
.workflow-steps {
    display: flex;
    flex-direction: column;
    gap: 0;
    position: relative;
    padding-left: 28px;
}

/* 连接线 */
.workflow-steps::before {
    content: '';
    position: absolute;
    left: 11px;
    top: 24px;
    bottom: 24px;
    width: 2px;
    background: #e5e7eb;
}

.workflow-step {
    position: relative;
    padding: 16px 20px;
    background: #fff;
    border-radius: 10px;
    border: none;
    border-left: none;
    margin-bottom: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
    transition: all 0.2s ease;
}

.workflow-step:last-child {
    margin-bottom: 0;
}

.workflow-step:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
    transform: translateX(2px);
}

/* 步骤状态指示器 - 圆点在左侧 */
.workflow-step::before {
    content: '';
    position: absolute;
    left: -24px;
    top: 20px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #e5e7eb;
    border: 2px solid #fff;
    box-shadow: 0 0 0 2px #e5e7eb;
    z-index: 1;
}

.workflow-step.completed::before {
    background: #10b981;
    box-shadow: 0 0 0 2px #10b981;
}

.workflow-step.in_progress::before {
    background: #3b82f6;
    box-shadow: 0 0 0 2px #3b82f6;
    animation: pulse-dot 2s infinite;
}

.workflow-step.failed::before {
    background: #ef4444;
    box-shadow: 0 0 0 2px #ef4444;
}

@keyframes pulse-dot {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.2); opacity: 0.8; }
}

.workflow-step .step-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px;
}

.workflow-step .step-title {
    font-size: 14px;
    font-weight: 600;
    color: #1d1d1f;
    letter-spacing: -0.01em;
}

/* 隐藏原来的状态图标，用伪元素代替 */
.workflow-step .status-icon {
    display: none;
}

.workflow-step .step-content {
    padding-left: 0;
}

.workflow-step .step-info {
    font-size: 12px;
    color: #6b7280;
    line-height: 1.6;
}

.workflow-step .step-info.warning {
    color: #d97706;
}

.workflow-step .grading-progress {
    display: flex;
    gap: 16px;
    margin-top: 8px;
    font-size: 11px;
    color: #9ca3af;
}

/* 步骤操作按钮 */
.workflow-step .step-action-btn {
    margin-left: auto;
    padding: 5px 14px;
    font-size: 12px;
    font-weight: 500;
    background: #f3f4f6;
    border: none;
    border-radius: 6px;
    color: #374151;
    cursor: pointer;
    transition: all 0.15s ease;
}

.workflow-step .step-action-btn:hover {
    background: #e5e7eb;
    color: #1d1d1f;
}

/* 加载动画 - 更精致 */
.loading-spinner {
    width: 32px;
    height: 32px;
    margin: 48px auto;
    border: 2px solid #f3f4f6;
    border-top-color: #1d1d1f;
    border-radius: 50%;
    animation: spin 0.7s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ========== 数据集选择器样式 - 简约版 ========== */
.dataset-selector {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.dataset-selector .selector-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 16px;
    border-bottom: none;
}

.dataset-selector .selector-header h4 {
    margin: 0;
    font-size: 15px;
    font-weight: 600;
    color: #1d1d1f;
    letter-spacing: -0.01em;
}

.dataset-selector .selector-header .btn {
    padding: 6px 14px;
    font-size: 12px;
    background: #f3f4f6;
    border: none;
    color: #6b7280;
}

.dataset-selector .selector-header .btn:hover {
    background: #e5e7eb;
    color: #374151;
}

.dataset-selector .selector-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    padding: 48px 20px;
    color: #9ca3af;
    font-size: 13px;
}

.dataset-selector .selector-loading .loading-spinner {
    width: 28px;
    height: 28px;
    margin: 0;
}

.dataset-selector .selector-empty,
.dataset-selector .selector-error {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    padding: 48px 20px;
    text-align: center;
}

.dataset-selector .selector-empty p,
.dataset-selector .selector-error p {
    margin: 0;
    color: #6b7280;
    font-size: 13px;
}

.dataset-selector .selector-empty .hint {
    font-size: 12px;
    color: #9ca3af;
}

.dataset-selector .selector-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
    max-height: 380px;
    overflow-y: auto;
    padding-right: 4px;
}

/* 自定义滚动条 */
.dataset-selector .selector-list::-webkit-scrollbar {
    width: 4px;
}

.dataset-selector .selector-list::-webkit-scrollbar-track {
    background: transparent;
}

.dataset-selector .selector-list::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 2px;
}

.dataset-selector .dataset-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: #f9fafb;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.15s ease;
    border: 1px solid transparent;
}

.dataset-selector .dataset-item:hover {
    background: #fff;
    border-color: #e5e7eb;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    transform: translateY(-1px);
}

.dataset-selector .dataset-item-main {
    display: flex;
    flex-direction: column;
    gap: 3px;
    flex: 1;
    min-width: 0;
}

.dataset-selector .dataset-name {
    font-size: 13px;
    font-weight: 500;
    color: #1d1d1f;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.dataset-selector .dataset-book {
    font-size: 11px;
    color: #9ca3af;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.dataset-selector .dataset-item-meta {
    display: flex;
    gap: 10px;
    align-items: center;
    flex-shrink: 0;
    margin-left: 12px;
}

.dataset-selector .dataset-subject {
    font-size: 11px;
    padding: 3px 8px;
    background: #e5e7eb;
    border-radius: 4px;
    color: #4b5563;
    font-weight: 500;
}

.dataset-selector .dataset-count {
    font-size: 12px;
    color: #6b7280;
    font-weight: 500;
    min-width: 40px;
    text-align: right;
}

.error-message {
    padding: 24px;
    text-align: center;
    color: #ef4444;
    font-size: 13px;
}

/* 弹窗底部按钮优化 */
.workflow-node-modal .modal-footer {
    padding-top: 20px;
    border-top: 1px solid #f3f4f6;
    margin-top: 8px;
}

.workflow-node-modal .modal-footer .btn {
    padding: 10px 20px;
    font-size: 13px;
    font-weight: 500;
    border-radius: 8px;
    transition: all 0.15s ease;
}

.workflow-node-modal .modal-footer .btn-secondary {
    background: #f3f4f6;
    border: none;
    color: #4b5563;
}

.workflow-node-modal .modal-footer .btn-secondary:hover {
    background: #e5e7eb;
    color: #1d1d1f;
}

.workflow-node-modal .modal-footer .btn-primary {
    background: #1d1d1f;
    border: none;
    color: #fff;
}

.workflow-node-modal .modal-footer .btn-primary:hover {
    background: #000;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
