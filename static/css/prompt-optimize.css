/* Prompt 优化页面样式 - Apple 风格黑白简约设计 */
:root {
    --primary-color: #1d1d1f;
    --primary-hover: #000;
    --primary-light: #f5f5f7;
    --bg-color: #fff;
    --card-bg: #fff;
    --text-primary: #1d1d1f;
    --text-secondary: #86868b;
    --border-color: #d2d2d7;
    --border-light: #e5e5e5;
    --success-color: #1d1d1f;
    --warning-color: #86868b;
    --error-color: #1d1d1f;
    --sidebar-width: 340px;
    --scoring-sidebar-width: 380px;
    --accent-color: #1d1d1f;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body { 
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', 'Segoe UI', sans-serif; 
    background: var(--bg-color); 
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.app-container { display: flex; flex-direction: column; height: 100vh; }

/* 顶部导航 */
.top-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 0 32px; 
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    height: 56px;
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-left { display: flex; align-items: center; gap: 16px; }
.header-center { flex: 1; display: flex; justify-content: center; }
.header-right { display: flex; align-items: center; gap: 12px; }

.menu-btn { 
    padding: 8px; 
    border: none; 
    background: transparent; 
    cursor: pointer; 
    border-radius: 8px;
    color: var(--text-secondary);
    transition: all 0.2s ease;
}
.menu-btn:hover { background: var(--primary-light); color: var(--text-primary); }

.task-info { display: flex; align-items: center; gap: 12px; }
.task-select, .version-select { 
    padding: 8px 14px; 
    border: 1px solid var(--border-color); 
    border-radius: 10px; 
    font-size: 14px; 
    background: var(--card-bg);
    min-width: 180px;
    color: var(--text-primary);
    transition: all 0.2s ease;
}
.task-select:focus, .version-select:focus {
    outline: none;
    border-color: var(--text-primary);
}

.tab-nav { 
    display: flex; 
    gap: 4px; 
    background: var(--primary-light); 
    padding: 4px; 
    border-radius: 12px; 
}
.tab-btn { 
    padding: 8px 24px; 
    border: none; 
    background: transparent; 
    font-size: 14px; 
    font-weight: 500; 
    color: var(--text-secondary); 
    cursor: pointer; 
    border-radius: 10px; 
    transition: all 0.2s ease; 
}
.tab-btn:hover { color: var(--text-primary); }
.tab-btn.active { 
    background: var(--card-bg); 
    color: var(--text-primary); 
    box-shadow: 0 1px 3px rgba(0,0,0,0.08); 
}

.btn-new-task { 
    padding: 8px 20px; 
    background: var(--primary-color); 
    color: #fff; 
    border: none; 
    border-radius: 20px; 
    font-size: 14px; 
    font-weight: 500;
    cursor: pointer; 
    transition: all 0.2s ease;
}
.btn-new-task:hover { background: var(--primary-hover); transform: scale(1.02); }

/* 主内容区布局 */
.main-content { 
    display: flex; 
    flex: 1; 
    overflow: hidden;
    background: #fafafa;
}

/* 左侧边栏 - Prompt 编辑器 */
.sidebar { 
    width: var(--sidebar-width); 
    background: var(--card-bg); 
    border-right: 1px solid var(--border-light);
    display: flex;
    flex-direction: column;
    transition: width 0.3s ease;
}
.sidebar.collapsed { width: 0; overflow: hidden; }

.sidebar-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 16px 20px; 
    border-bottom: 1px solid var(--border-light);
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.btn-collapse { 
    padding: 4px 8px; 
    border: none; 
    background: transparent; 
    cursor: pointer; 
    color: var(--text-secondary);
    font-size: 14px;
    transition: all 0.2s ease;
}
.btn-collapse:hover { color: var(--text-primary); }

.prompt-editor-wrapper { flex: 1; padding: 16px 20px; overflow: auto; }
.prompt-textarea { 
    width: 100%; 
    height: 100%; 
    min-height: 200px;
    padding: 16px; 
    border: 1px solid var(--border-color); 
    border-radius: 12px; 
    font-size: 14px; 
    font-family: 'SF Mono', 'Monaco', 'Menlo', monospace; 
    resize: none;
    line-height: 1.7;
    background: var(--primary-light);
    color: var(--text-primary);
    transition: all 0.2s ease;
}
.prompt-textarea:focus { 
    outline: none; 
    border-color: var(--text-primary); 
    background: var(--card-bg);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
}

.sidebar-footer { 
    padding: 16px 20px; 
    border-top: 1px solid var(--border-light);
    background: var(--primary-light);
}
.model-select-row { 
    display: flex; 
    align-items: center; 
    gap: 10px; 
    margin-bottom: 14px;
    font-size: 13px;
    font-weight: 500;
}
.model-select { 
    flex: 1; 
    padding: 8px 12px; 
    border: 1px solid var(--border-color); 
    border-radius: 10px; 
    font-size: 13px;
    background: var(--card-bg);
    color: var(--text-primary);
}
.prompt-actions { display: flex; gap: 10px; }
.btn-small { 
    flex: 1;
    padding: 10px 14px; 
    border: 1px solid var(--border-color); 
    border-radius: 10px; 
    font-size: 13px; 
    font-weight: 500;
    cursor: pointer; 
    background: var(--card-bg);
    color: var(--text-primary);
    transition: all 0.2s ease;
}
.btn-small:hover { background: var(--border-light); border-color: var(--text-primary); }
.btn-small.primary { 
    background: var(--primary-color); 
    color: #fff; 
    border-color: var(--primary-color); 
}
.btn-small.primary:hover { background: var(--primary-hover); }

/* 中间内容区 */
.content-area { 
    flex: 1; 
    overflow: auto;
    display: flex;
    flex-direction: column;
}

.tab-content { display: none; flex: 1; overflow: auto; }
.tab-content.active { display: flex; flex-direction: column; }

/* 批量评测布局 */
.batch-layout { 
    display: flex; 
    flex-direction: column; 
    height: 100%;
    padding: 24px;
}

.batch-toolbar { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 16px;
}
.toolbar-title { 
    font-size: 17px; 
    font-weight: 600; 
    letter-spacing: -0.3px;
}
.toolbar-actions { display: flex; gap: 10px; }

.btn-toolbar { 
    display: inline-flex; 
    align-items: center; 
    gap: 8px; 
    padding: 10px 18px; 
    border: 1px solid var(--border-color); 
    border-radius: 10px; 
    background: var(--card-bg); 
    font-size: 14px; 
    font-weight: 500;
    cursor: pointer;
    color: var(--text-primary);
    transition: all 0.2s ease;
}
.btn-toolbar:hover { background: var(--primary-light); border-color: var(--text-primary); }
.btn-toolbar.primary { 
    background: var(--primary-color); 
    color: #fff; 
    border-color: var(--primary-color); 
}
.btn-toolbar.primary:hover { background: var(--primary-hover); }
.btn-toolbar:disabled { opacity: 0.4; cursor: not-allowed; }

/* 配置行 */
.config-row { 
    display: flex; 
    gap: 32px; 
    padding: 14px 20px; 
    background: var(--card-bg); 
    border: 1px solid var(--border-light);
    border-radius: 12px; 
    margin-bottom: 16px;
    font-size: 14px;
}
.config-item { display: flex; align-items: center; gap: 10px; }
.config-label { color: var(--text-secondary); font-weight: 500; }
.config-select { 
    padding: 6px 12px; 
    border: 1px solid var(--border-color); 
    border-radius: 8px; 
    font-size: 13px;
    background: var(--card-bg);
}
.config-value { 
    color: var(--text-primary); 
    max-width: 400px; 
    overflow: hidden; 
    text-overflow: ellipsis; 
    white-space: nowrap; 
}

/* 数据表格 */
.data-table-wrapper { 
    flex: 1; 
    overflow: auto; 
    background: var(--card-bg); 
    border: 1px solid var(--border-light); 
    border-radius: 16px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}
.data-table { 
    width: 100%; 
    border-collapse: collapse; 
    font-size: 14px;
}
.data-table th, .data-table td { 
    padding: 14px 16px; 
    text-align: left; 
    border-bottom: 1px solid var(--border-light);
    vertical-align: top;
}
.data-table th { 
    background: var(--primary-light); 
    font-size: 12px; 
    font-weight: 600; 
    color: var(--text-secondary); 
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: sticky;
    top: 0;
    z-index: 10;
}
.data-table tbody tr:hover { background: rgba(0, 0, 0, 0.02); }
.data-table tbody tr:last-child td { border-bottom: none; }

.col-checkbox { width: 48px; text-align: center; }
.col-index { width: 56px; text-align: center; }
.col-image { width: 180px; }
.col-ideal { width: 200px; }
.col-config { width: 100px; }
.col-response { min-width: 250px; }
.col-score { width: 120px; }
.col-actions { width: 80px; text-align: center; }

/* 表格单元格内容 */
.cell-image { 
    width: 120px; 
    height: 80px; 
    object-fit: cover; 
    border-radius: 8px; 
    cursor: pointer;
    border: 1px solid var(--border-light);
    transition: all 0.2s ease;
}
.cell-image:hover { opacity: 0.85; transform: scale(1.02); }

.cell-text { 
    max-height: 80px; 
    overflow: hidden; 
    text-overflow: ellipsis; 
    display: -webkit-box; 
    -webkit-line-clamp: 3; 
    -webkit-box-orient: vertical;
    cursor: pointer;
    font-size: 13px;
    line-height: 1.6;
    color: var(--text-primary);
}
.cell-text:hover { color: var(--text-secondary); }

.cell-json { 
    font-family: 'SF Mono', 'Monaco', 'Menlo', monospace; 
    font-size: 12px; 
    background: var(--primary-light); 
    padding: 10px; 
    border-radius: 8px;
    max-height: 100px;
    overflow: hidden;
}

.cell-expand { 
    display: flex; 
    align-items: center; 
    gap: 6px; 
    color: var(--text-secondary); 
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
}
.cell-expand:hover { color: var(--text-primary); }

/* 评分显示 */
.score-display { 
    display: inline-flex; 
    align-items: center; 
    gap: 8px;
}
.score-value { 
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 36px;
    height: 32px;
    padding: 0 10px;
    border-radius: 8px; 
    font-weight: 600;
    font-size: 14px;
}
.score-value.high { background: var(--primary-light); color: var(--text-primary); }
.score-value.medium { background: #f5f5f7; color: var(--text-secondary); }
.score-value.low { background: #f5f5f7; color: var(--text-secondary); }
.score-label { font-size: 12px; color: var(--text-secondary); }
.no-score { color: var(--text-secondary); font-size: 13px; }

/* 操作按钮 */
.btn-icon { 
    padding: 8px; 
    border: none; 
    background: transparent; 
    cursor: pointer; 
    border-radius: 8px; 
    color: var(--text-secondary);
    transition: all 0.2s ease;
}
.btn-icon:hover { background: var(--primary-light); color: var(--text-primary); }

.empty-row td { text-align: center; padding: 80px 20px; }
.empty-hint { color: var(--text-secondary); font-size: 14px; }

/* 分页 */
.pagination { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 16px 0;
    margin-top: 16px;
}
.btn-add-row { 
    padding: 10px 20px; 
    border: 1px dashed var(--border-color); 
    border-radius: 10px; 
    background: transparent; 
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}
.btn-add-row:hover { border-color: var(--text-primary); color: var(--text-primary); }

.page-info { font-size: 14px; color: var(--text-secondary); }
.page-controls { display: flex; align-items: center; gap: 8px; }
.page-btn { 
    width: 36px;
    height: 36px;
    border: 1px solid var(--border-color); 
    border-radius: 10px; 
    background: var(--card-bg); 
    font-size: 16px; 
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}
.page-btn:hover:not(:disabled) { background: var(--primary-light); border-color: var(--text-primary); }
.page-btn:disabled { opacity: 0.3; cursor: not-allowed; }
.page-numbers { font-size: 14px; padding: 0 12px; font-weight: 500; }
.page-size { 
    padding: 8px 14px; 
    border: 1px solid var(--border-color); 
    border-radius: 10px; 
    font-size: 14px;
    background: var(--card-bg);
}

/* 右侧评分面板 */
.scoring-sidebar { 
    width: var(--scoring-sidebar-width); 
    background: var(--card-bg); 
    border-left: 1px solid var(--border-light);
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease;
}
.scoring-sidebar.hidden { 
    transform: translateX(100%);
    position: absolute;
    right: 0;
    top: 56px;
    bottom: 0;
}

.scoring-sidebar-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 20px; 
    border-bottom: 1px solid var(--border-light);
}
.scoring-title { 
    display: flex; 
    align-items: center; 
    gap: 10px; 
    font-size: 15px; 
    font-weight: 600;
}
.btn-close { 
    width: 32px;
    height: 32px;
    border: none; 
    background: var(--primary-light); 
    font-size: 18px; 
    cursor: pointer; 
    color: var(--text-secondary);
    border-radius: 50%;
    transition: all 0.2s ease;
}
.btn-close:hover { background: var(--border-light); color: var(--text-primary); }

.scoring-sidebar-body { 
    flex: 1; 
    padding: 20px; 
    overflow-y: auto;
}
.scoring-desc { 
    font-size: 13px; 
    color: var(--text-secondary); 
    margin-bottom: 20px;
    line-height: 1.6;
}
.link { color: var(--text-primary); text-decoration: underline; font-weight: 500; }
.link:hover { text-decoration: none; }

.scoring-actions-row { 
    display: flex; 
    gap: 10px; 
    margin-bottom: 24px;
}
.btn-score-action { 
    flex: 1;
    padding: 12px 14px; 
    border: none; 
    border-radius: 10px; 
    font-size: 13px; 
    font-weight: 500;
    cursor: pointer;
    background: var(--primary-color);
    color: #fff;
    transition: all 0.2s ease;
}
.btn-score-action:hover { background: var(--primary-hover); }
.btn-score-action.secondary { 
    background: var(--primary-light); 
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}
.btn-score-action.secondary:hover { background: var(--border-light); }

.scoring-rules-section { margin-bottom: 24px; }
.rules-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 10px;
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary);
}
.btn-ai-generate { 
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px; 
    border: 1px solid var(--border-color); 
    border-radius: 8px; 
    background: var(--card-bg); 
    font-size: 13px; 
    font-weight: 500;
    cursor: pointer;
    color: var(--text-primary);
    transition: all 0.2s ease;
}
.btn-ai-generate:hover { background: var(--primary-light); border-color: var(--text-primary); }

.scoring-rules-textarea { 
    width: 100%; 
    padding: 14px; 
    border: 1px solid var(--border-color); 
    border-radius: 12px; 
    font-size: 13px; 
    line-height: 1.7;
    resize: vertical;
    font-family: inherit;
    background: var(--primary-light);
    transition: all 0.2s ease;
}
.scoring-rules-textarea:focus { 
    outline: none; 
    border-color: var(--text-primary); 
    background: var(--card-bg);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
}

.scoring-method-section { 
    margin-top: 4px;
}
.method-label { 
    font-size: 13px; 
    font-weight: 600; 
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary);
}
.method-options { display: flex; flex-direction: column; gap: 10px; }
.method-option { 
    display: flex; 
    align-items: center; 
    gap: 10px; 
    font-size: 14px;
    cursor: pointer;
    color: var(--text-primary);
}
.method-option input { 
    margin: 0; 
    width: 18px;
    height: 18px;
    accent-color: var(--primary-color);
}


/* 调试模式 */
.debug-layout { padding: 24px; }
.debug-header { margin-bottom: 24px; }
.debug-header h3 { font-size: 17px; font-weight: 600; letter-spacing: -0.3px; }
.debug-body { display: flex; flex-direction: column; gap: 24px; }

.variables-section { 
    background: var(--card-bg); 
    border: 1px solid var(--border-light); 
    border-radius: 16px; 
    padding: 20px;
}
.section-title { 
    font-size: 13px; 
    font-weight: 600; 
    margin-bottom: 16px; 
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary);
}
.variables-inputs { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
    gap: 20px;
}
.variable-input { display: flex; flex-direction: column; gap: 8px; }
.variable-input label { font-size: 13px; font-weight: 600; color: var(--text-primary); }
.variable-input textarea, .variable-input input[type="text"] { 
    padding: 12px 14px; 
    border: 1px solid var(--border-color); 
    border-radius: 10px; 
    font-size: 14px;
    transition: all 0.2s ease;
}
.variable-input textarea { min-height: 100px; resize: vertical; }
.variable-input textarea:focus, .variable-input input[type="text"]:focus {
    outline: none;
    border-color: var(--text-primary);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
}
.var-type { color: var(--text-secondary); font-weight: normal; }

.image-upload-area { 
    border: 2px dashed var(--border-color); 
    border-radius: 12px; 
    padding: 24px; 
    text-align: center; 
    cursor: pointer;
    transition: all 0.2s ease;
}
.image-upload-area:hover { border-color: var(--text-primary); background: var(--primary-light); }
.upload-placeholder { color: var(--text-secondary); font-size: 14px; }
.image-preview { max-width: 100%; max-height: 150px; border-radius: 10px; }

.generate-section { text-align: center; }
.btn-generate { 
    display: inline-flex; 
    align-items: center; 
    gap: 10px; 
    padding: 14px 36px; 
    background: var(--primary-color); 
    color: #fff; 
    border: none; 
    border-radius: 12px; 
    font-size: 15px; 
    font-weight: 500; 
    cursor: pointer;
    transition: all 0.2s ease;
}
.btn-generate:hover { background: var(--primary-hover); transform: translateY(-1px); }
.btn-generate:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

.response-section { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.response-panel { 
    background: var(--card-bg); 
    border: 1px solid var(--border-light); 
    border-radius: 16px; 
    overflow: hidden;
}
.panel-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 14px 20px; 
    background: var(--primary-light); 
    border-bottom: 1px solid var(--border-light); 
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary);
}
.panel-body { padding: 20px; min-height: 150px; max-height: 300px; overflow-y: auto; }
.ideal-textarea { 
    width: 100%; 
    height: 100%; 
    min-height: 120px; 
    border: none; 
    resize: none; 
    font-size: 14px;
    line-height: 1.6;
}
.ideal-textarea:focus { outline: none; }

.scoring-section { 
    display: flex; 
    align-items: center; 
    gap: 20px; 
    background: var(--card-bg); 
    border: 1px solid var(--border-light); 
    border-radius: 16px; 
    padding: 20px;
}
.score-label { font-size: 14px; font-weight: 600; }
.score-buttons { display: flex; gap: 8px; flex: 1; }
.score-btn { 
    width: 40px; 
    height: 40px; 
    border: 1px solid var(--border-color); 
    border-radius: 10px; 
    background: var(--card-bg); 
    font-size: 14px; 
    font-weight: 500; 
    cursor: pointer;
    transition: all 0.2s ease;
}
.score-btn:hover { border-color: var(--text-primary); background: var(--primary-light); }
.score-btn.active { background: var(--primary-color); color: #fff; border-color: var(--primary-color); }
.btn-add-sample { 
    padding: 12px 24px; 
    background: var(--primary-color); 
    color: #fff; 
    border: none; 
    border-radius: 10px; 
    font-size: 14px; 
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}
.btn-add-sample:hover { background: var(--primary-hover); }

/* 智能优化 */
.optimize-layout { 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    height: 100%;
    padding: 48px;
}
.optimize-check { 
    text-align: center; 
    padding: 48px; 
    background: var(--card-bg); 
    border: 1px solid var(--border-light); 
    border-radius: 20px;
    max-width: 420px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
}
.check-icon { margin-bottom: 20px; color: var(--text-primary); }
.check-title { font-size: 20px; font-weight: 600; margin-bottom: 10px; letter-spacing: -0.3px; }
.check-status { font-size: 14px; color: var(--text-secondary); margin-bottom: 28px; }
.check-status.passed { color: var(--text-primary); font-weight: 500; }
.check-requirements { display: flex; flex-direction: column; gap: 14px; margin-bottom: 28px; text-align: left; }
.requirement-item { display: flex; align-items: center; gap: 12px; font-size: 14px; }
.requirement-item .req-icon { 
    width: 24px; 
    height: 24px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    border-radius: 50%; 
    border: 2px solid var(--border-color); 
    font-size: 12px;
    font-weight: 600;
}
.requirement-item.passed .req-icon { background: var(--text-primary); color: #fff; border-color: var(--text-primary); }
.btn-start-optimize { 
    padding: 14px 36px; 
    background: var(--primary-color); 
    color: #fff; 
    border: none; 
    border-radius: 12px; 
    font-size: 15px; 
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}
.btn-start-optimize:hover { background: var(--primary-hover); transform: translateY(-1px); }
.btn-start-optimize:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

/* Modal 弹窗 */
.modal { 
    display: none; 
    position: fixed; 
    top: 0; 
    left: 0; 
    right: 0; 
    bottom: 0; 
    background: rgba(0,0,0,0.4); 
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    z-index: 1000; 
    align-items: center; 
    justify-content: center;
}
.modal.show { display: flex; }
.modal-content { 
    background: var(--card-bg); 
    border-radius: 20px; 
    max-width: 500px; 
    width: 90%; 
    max-height: 85vh; 
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}
.modal-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 20px 24px; 
    border-bottom: 1px solid var(--border-light);
}
.modal-header h3 { font-size: 17px; font-weight: 600; letter-spacing: -0.3px; }
.modal-close { 
    width: 32px; 
    height: 32px; 
    border: none; 
    background: var(--primary-light); 
    font-size: 18px; 
    cursor: pointer; 
    color: var(--text-secondary); 
    border-radius: 50%;
    transition: all 0.2s ease;
}
.modal-close:hover { background: var(--border-light); color: var(--text-primary); }
.modal-body { padding: 24px; max-height: 60vh; overflow-y: auto; }
.modal-footer { 
    display: flex; 
    justify-content: flex-end; 
    gap: 12px; 
    padding: 20px 24px; 
    border-top: 1px solid var(--border-light);
    background: var(--primary-light);
}
.modal-actions { 
    display: flex; 
    justify-content: flex-end; 
    gap: 12px; 
    padding: 20px 24px; 
    border-top: 1px solid var(--border-light);
}
.btn-cancel { 
    padding: 12px 24px; 
    border: 1px solid var(--border-color); 
    border-radius: 10px; 
    background: var(--card-bg); 
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}
.btn-cancel:hover { background: var(--primary-light); border-color: var(--text-primary); }
.btn-save { 
    padding: 12px 24px; 
    background: var(--primary-color); 
    color: #fff; 
    border: none; 
    border-radius: 10px; 
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}
.btn-save:hover { background: var(--primary-hover); }

.form-group { margin-bottom: 20px; }
.form-group label { 
    display: block; 
    font-size: 13px; 
    font-weight: 600; 
    margin-bottom: 8px; 
    color: var(--text-primary);
}
.form-group input, .form-group textarea { 
    width: 100%; 
    padding: 12px 16px; 
    border: 1px solid var(--border-color); 
    border-radius: 12px; 
    font-size: 15px;
    font-family: inherit;
    transition: all 0.2s ease;
}
.form-group input:focus, .form-group textarea:focus { 
    outline: none; 
    border-color: var(--text-primary); 
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
}

/* 单元格详情弹窗 */
.cell-modal { max-width: 700px; }
.cell-content { 
    font-size: 14px; 
    line-height: 1.7; 
    white-space: pre-wrap;
    font-family: 'SF Mono', 'Monaco', 'Menlo', monospace;
    background: var(--primary-light);
    padding: 20px;
    border-radius: 12px;
    max-height: 400px;
    overflow-y: auto;
}

/* 行编辑弹窗 */
.row-edit-modal { max-width: 600px; }
.edit-section { margin-bottom: 24px; }
.edit-section label { 
    display: block; 
    font-size: 13px; 
    font-weight: 600; 
    margin-bottom: 10px; 
    color: var(--text-primary);
}
.edit-section textarea { 
    width: 100%; 
    padding: 14px; 
    border: 1px solid var(--border-color); 
    border-radius: 12px; 
    font-size: 14px;
    resize: vertical;
    line-height: 1.6;
}
.model-response-display { 
    padding: 14px; 
    background: var(--primary-light); 
    border-radius: 12px; 
    font-size: 14px;
    min-height: 80px;
    max-height: 150px;
    overflow-y: auto;
    line-height: 1.6;
}
.edit-score-buttons { display: flex; gap: 10px; }
.edit-score-buttons .score-btn { width: 44px; height: 44px; }

/* 图片预览弹窗 */
.image-modal { 
    display: none; 
    position: fixed; 
    top: 0; 
    left: 0; 
    right: 0; 
    bottom: 0; 
    background: rgba(0,0,0,0.95); 
    z-index: 2000; 
    align-items: center; 
    justify-content: center;
    cursor: zoom-out;
}
.image-modal.show { display: flex; }
.image-modal img { max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 8px; }

/* 加载动画 */
.loading-spinner { 
    display: inline-block; 
    width: 18px; 
    height: 18px; 
    border: 2px solid rgba(255,255,255,0.3); 
    border-top-color: #fff; 
    border-radius: 50%; 
    animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.loading-hint { text-align: center; padding: 48px; color: var(--text-secondary); font-size: 14px; }
.error-hint { text-align: center; padding: 24px; color: var(--text-primary); font-weight: 500; }

/* 响应式 */
@media (max-width: 1200px) {
    .sidebar { width: 300px; }
    .scoring-sidebar { width: 340px; }
}
@media (max-width: 992px) {
    .sidebar { position: absolute; left: 0; top: 56px; bottom: 0; z-index: 100; }
    .sidebar.collapsed { transform: translateX(-100%); }
    .scoring-sidebar { position: absolute; right: 0; top: 56px; bottom: 0; z-index: 100; }
}


/* 任务配置区域 */
.task-config-section {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-light);
    background: var(--primary-light);
}
.config-row-inline {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    font-size: 13px;
}
.config-row-inline:last-child { margin-bottom: 0; }
.config-row-inline label {
    color: var(--text-secondary);
    min-width: 70px;
    font-weight: 500;
}
.config-select-small {
    flex: 1;
    padding: 8px 12px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 13px;
    background: var(--card-bg);
    color: var(--text-primary);
}

/* Prompt标签行 */
.prompt-label-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}
.prompt-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.btn-ai-gen {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--card-bg);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    color: var(--text-primary);
    transition: all 0.2s ease;
}
.btn-ai-gen:hover { background: var(--primary-light); border-color: var(--text-primary); }

/* GSB比较模式样式 */
.gsb-section {
    background: var(--card-bg);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    padding: 20px;
}
.gsb-label {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 16px;
}
.gsb-reference {
    margin-bottom: 20px;
}
.gsb-reference label {
    display: block;
    font-size: 13px;
    color: var(--text-secondary);
    margin-bottom: 8px;
    font-weight: 500;
}
.reference-textarea {
    width: 100%;
    min-height: 100px;
    padding: 14px;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    font-size: 14px;
    resize: vertical;
    line-height: 1.6;
}
.reference-textarea:focus {
    outline: none;
    border-color: var(--text-primary);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
}
.gsb-buttons {
    display: flex;
    gap: 16px;
    margin-bottom: 20px;
}
.gsb-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 20px 16px;
    border: 2px solid var(--border-color);
    border-radius: 12px;
    background: var(--card-bg);
    cursor: pointer;
    transition: all 0.2s ease;
}
.gsb-btn:hover { border-color: var(--text-secondary); background: var(--primary-light); }
.gsb-btn.active.good { border-color: var(--text-primary); background: var(--primary-light); }
.gsb-btn.active.same { border-color: var(--text-secondary); background: #f5f5f7; }
.gsb-btn.active.bad { border-color: var(--text-secondary); background: #f5f5f7; }
.gsb-icon { font-size: 28px; }
.gsb-btn span:last-child { font-size: 13px; font-weight: 600; }

/* 评估模式徽章 */
.eval-mode-badge {
    display: inline-flex;
    align-items: center;
    padding: 6px 14px;
    background: var(--primary-light);
    color: var(--text-primary);
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
}
.eval-mode-badge.gsb {
    background: #f5f5f7;
    color: var(--text-secondary);
}

/* GSB结果显示 */
.gsb-result {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
}
.gsb-result.good { background: var(--primary-light); color: var(--text-primary); }
.gsb-result.same { background: #f5f5f7; color: var(--text-secondary); }
.gsb-result.bad { background: #f5f5f7; color: var(--text-secondary); }

/* 表格列宽调整 */
.col-input { min-width: 180px; }
.col-reference { min-width: 180px; }

/* Prompt生成弹窗 */
.prompt-gen-modal { max-width: 600px; }
.task-desc-textarea {
    width: 100%;
    min-height: 140px;
    padding: 14px;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    font-size: 14px;
    resize: vertical;
    margin-bottom: 16px;
    line-height: 1.6;
}
.task-desc-textarea:focus {
    outline: none;
    border-color: var(--text-primary);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
}
.gen-options {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 20px;
}
.gen-option {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border: 1px solid var(--border-color);
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    background: var(--card-bg);
    transition: all 0.2s ease;
}
.gen-option:hover { border-color: var(--text-primary); background: var(--primary-light); }
.gen-option.selected { 
    background: var(--text-primary); 
    border-color: var(--text-primary);
    color: #fff;
}
.generated-prompt-preview {
    background: var(--primary-light);
    border: 1px solid var(--border-light);
    border-radius: 12px;
    padding: 20px;
    font-size: 14px;
    line-height: 1.7;
    max-height: 200px;
    overflow-y: auto;
    white-space: pre-wrap;
    font-family: 'SF Mono', 'Monaco', 'Menlo', monospace;
}

/* 多轮对话样式 */
.multi-turn-section {
    background: var(--card-bg);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 20px;
}
.conversation-list {
    display: flex;
    flex-direction: column;
    gap: 14px;
    margin-bottom: 16px;
}
.conversation-item {
    display: flex;
    gap: 14px;
    padding: 14px;
    background: var(--primary-light);
    border-radius: 12px;
}
.conversation-item.user { background: rgba(0, 0, 0, 0.03); }
.conversation-item.assistant { background: var(--primary-light); }
.conversation-role {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    min-width: 60px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.conversation-content {
    flex: 1;
    font-size: 14px;
    line-height: 1.6;
}
.btn-add-turn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    border: 1px dashed var(--border-color);
    border-radius: 10px;
    background: transparent;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}
.btn-add-turn:hover {
    border-color: var(--text-primary);
    color: var(--text-primary);
}

/* 版本对比样式 */
.version-compare-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}
.version-panel {
    background: var(--card-bg);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    overflow: hidden;
}
.version-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 20px;
    background: var(--primary-light);
    border-bottom: 1px solid var(--border-light);
}
.version-panel-header .version-name {
    font-size: 15px;
    font-weight: 600;
}
.version-panel-header .version-score {
    font-size: 14px;
    color: var(--text-primary);
    font-weight: 600;
}
.version-panel-body {
    padding: 20px;
    font-size: 14px;
    line-height: 1.7;
    max-height: 300px;
    overflow-y: auto;
}
.diff-add { background: rgba(0, 0, 0, 0.06); }
.diff-remove { background: rgba(0, 0, 0, 0.03); text-decoration: line-through; color: var(--text-secondary); }

/* 编辑弹窗中的GSB按钮 */
.edit-gsb-buttons {
    display: flex;
    gap: 14px;
}
.edit-gsb-buttons .gsb-btn {
    flex: 1;
    padding: 14px;
    font-size: 14px;
}


/* 新版调试界面样式 */
.debug-layout-new {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    height: 100%;
    padding: 24px;
    overflow: auto;
}

.debug-left, .debug-right {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* 调试Prompt区域 */
.debug-prompt-section {
    background: var(--card-bg);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}

.debug-prompt-header {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 20px;
    border-bottom: 1px solid var(--border-light);
    background: var(--primary-light);
}

.debug-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
}

.debug-version {
    font-size: 12px;
    color: var(--text-secondary);
    background: var(--border-light);
    padding: 4px 10px;
    border-radius: 6px;
    font-weight: 500;
}

.debug-actions {
    margin-left: auto;
    display: flex;
    gap: 10px;
}

.btn-debug-action {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--card-bg);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    color: var(--text-secondary);
    transition: all 0.2s ease;
}

.btn-debug-action:hover {
    background: var(--primary-light);
    color: var(--text-primary);
    border-color: var(--text-primary);
}

.btn-debug-primary {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: var(--primary-color);
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-debug-primary:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
}

.debug-prompt-body {
    padding: 20px;
}

.debug-prompt-textarea {
    width: 100%;
    min-height: 160px;
    padding: 14px;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    font-size: 15px;
    line-height: 1.7;
    resize: vertical;
    font-family: inherit;
    background: var(--primary-light);
    transition: all 0.2s ease;
}

.debug-prompt-textarea:focus {
    outline: none;
    border-color: var(--text-primary);
    background: var(--card-bg);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
}

/* 图片上传区域 */
.debug-image-upload {
    margin-top: 16px;
    display: flex;
    align-items: center;
    gap: 14px;
}

.debug-image-preview {
    position: relative;
    display: inline-block;
}

.debug-image-preview img {
    max-width: 140px;
    max-height: 100px;
    border-radius: 10px;
    border: 1px solid var(--border-light);
}

.debug-image-remove {
    position: absolute;
    top: -10px;
    right: -10px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--text-primary);
    color: #fff;
    border: none;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.debug-image-remove:hover {
    transform: scale(1.1);
}

.btn-upload-image {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    border: 1px dashed var(--border-color);
    border-radius: 10px;
    background: transparent;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-upload-image:hover {
    border-color: var(--text-primary);
    color: var(--text-primary);
    background: var(--primary-light);
}

/* 历史记录区域 */
.debug-history-section {
    background: var(--card-bg);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}

.debug-history-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 20px;
    border-bottom: 1px solid var(--border-light);
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.debug-history-list {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
}

.debug-history-empty {
    text-align: center;
    padding: 48px 24px;
    color: var(--text-secondary);
    font-size: 14px;
}

.debug-history-item {
    display: flex;
    gap: 14px;
    padding: 14px;
    border-radius: 12px;
    cursor: pointer;
    margin-bottom: 10px;
    background: var(--primary-light);
    transition: all 0.2s ease;
}

.debug-history-item:hover {
    background: rgba(0, 0, 0, 0.04);
}

.debug-history-item.active {
    background: rgba(0, 0, 0, 0.06);
    border: 1px solid var(--border-color);
}

.history-item-icon {
    width: 44px;
    height: 44px;
    border-radius: 10px;
    background: var(--border-light);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.history-item-icon img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 10px;
}

.history-item-content {
    flex: 1;
    min-width: 0;
}

.history-item-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 6px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.history-item-desc {
    font-size: 13px;
    color: var(--text-secondary);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.5;
}

/* 模型回答区域 */
.debug-response-section {
    background: var(--card-bg);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}

.debug-response-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 20px;
    border-bottom: 1px solid var(--border-light);
    background: var(--primary-light);
}

.debug-model-info {
    display: flex;
    align-items: center;
    gap: 10px;
}

.model-badge {
    font-size: 12px;
    color: var(--text-primary);
    background: var(--border-light);
    padding: 6px 12px;
    border-radius: 6px;
    font-weight: 500;
}

.btn-copy {
    padding: 8px;
    border: none;
    background: transparent;
    cursor: pointer;
    color: var(--text-secondary);
    border-radius: 8px;
    transition: all 0.2s ease;
}

.btn-copy:hover {
    background: var(--border-light);
    color: var(--text-primary);
}

.debug-response-body {
    padding: 20px;
    min-height: 200px;
    max-height: 400px;
    overflow-y: auto;
}

.debug-response-placeholder {
    color: var(--text-secondary);
    font-size: 14px;
    text-align: center;
    padding: 80px 24px;
}

/* 操作指引 */
.debug-guide-section {
    background: var(--card-bg);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}

.debug-guide-header {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.debug-guide-steps {
    display: flex;
    flex-direction: column;
    gap: 18px;
}

.guide-step {
    display: flex;
    gap: 14px;
}

.step-num {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--text-primary);
    color: #fff;
    font-size: 13px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.step-content {
    flex: 1;
}

.step-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 6px;
}

.step-desc {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.6;
}

/* 评分区域 */
.debug-scoring-section {
    background: var(--card-bg);
    border: 1px solid var(--border-light);
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}

.debug-scoring-row {
    margin-bottom: 20px;
}

.debug-scoring-row:last-child {
    margin-bottom: 0;
}

.scoring-item label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--text-primary);
}

.debug-ideal-textarea {
    width: 100%;
    min-height: 100px;
    padding: 12px;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    font-size: 14px;
    resize: vertical;
    line-height: 1.6;
}

.btn-ai-gen-small {
    margin-top: 10px;
    padding: 8px 16px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background: var(--card-bg);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    color: var(--text-primary);
    transition: all 0.2s ease;
}

.btn-ai-gen-small:hover {
    background: var(--primary-light);
    border-color: var(--text-primary);
}

.debug-score-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.debug-score-buttons .score-btn {
    width: 36px;
    height: 36px;
}

.btn-add-to-dataset {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    width: 100%;
    padding: 14px;
    background: var(--primary-color);
    color: #fff;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 500;
    cursor: pointer;
    margin-top: 20px;
    transition: all 0.2s ease;
}

.btn-add-to-dataset:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
}

/* 响应式 */
@media (max-width: 1200px) {
    .debug-layout-new {
        grid-template-columns: 1fr;
    }
}

/* 评分提示 */
.scoring-hint {
    margin-top: 16px;
    padding: 12px 16px;
    background: var(--primary-light);
    border-radius: 10px;
    font-size: 13px;
    color: var(--text-secondary);
    text-align: center;
}

/* 返回按钮 */
.back-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 10px;
    color: var(--text-secondary);
    text-decoration: none;
    transition: all 0.2s ease;
}

.back-btn:hover {
    background: var(--primary-light);
    color: var(--text-primary);
}

/* 滚动条美化 */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
}

/* 选择高亮 */
::selection {
    background: rgba(0, 0, 0, 0.1);
}
