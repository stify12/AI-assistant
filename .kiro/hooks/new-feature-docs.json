{
  "name": "新功能文档同步",
  "version": "1.0.0",
  "description": "创建新的路由、服务或模板文件时，自动更新项目文档并创建对应的功能说明",
  "when": {
    "type": "fileCreated",
    "patterns": [
      "routes/*.py",
      "services/*.py",
      "templates/*.html",
      "static/css/*.css",
      "static/js/*.js"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "检测到新增文件，执行以下文档同步任务：\n\n## 1. 更新 structure.md\n- 在对应的目录章节添加新文件说明\n- 如果是新功能模块，添加完整的目录结构\n- 更新命名约定示例（如有必要）\n\n## 2. 更新 product.md\n如果是新功能模块（routes/*.py 或 templates/*.html）：\n- 在「核心功能模块」章节添加新功能说明\n- 包含：功能名称、路由路径、核心能力描述\n- 如果涉及新的学科或评估维度，更新对应表格\n\n## 3. 检查配套文件\n- 新增 routes/*.py → 检查是否需要创建对应的 template 和 static 文件\n- 新增 templates/*.html → 检查是否有对应的 CSS 和 JS 文件\n- 新增 services/*.py → 检查是否需要创建测试文件\n\n## 4. 创建功能文档（可选）\n如果是重要的新功能模块，询问是否需要在 .kiro/steering/ 创建独立的功能文档，包含：\n- 功能概述\n- 数据流程\n- API 接口\n- 前端交互\n- 注意事项\n\n## 5. 提示后续任务\n提醒开发者：\n- [ ] 在 app.py 中注册新的 Blueprint（如果是路由文件）\n- [ ] 更新 requirements.txt（如果引入新依赖）\n- [ ] 创建对应的测试文件\n- [ ] 更新 API 文档（如果有）\n\n执行完成后，简要列出更新的文档和建议的后续操作。"
  }
}
