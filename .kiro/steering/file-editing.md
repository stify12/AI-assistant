# 文件编辑规范

## 优先使用 IDE 工具

始终优先使用 `fsWrite`、`strReplace`、`fsAppend` 等 IDE 工具进行文件编辑，这些工具会自动同步 IDE 缓存和磁盘文件。

## 编辑策略

### 1. 小范围修改：使用 strReplace
- 适用于修改几行到几十行代码
- 确保 `oldStr` 足够唯一，包含 2-3 行上下文
- 如果替换失败，检查空格、缩进是否完全匹配

### 2. 添加新代码：使用 fsAppend
- 在文件末尾追加新函数或代码块
- 自动处理换行

### 3. 大范围重写：使用 fsWrite
- 适用于重写整个文件或大部分内容
- 对于大文件，先写入部分内容，再用 fsAppend 追加

### 4. 多处修改：并行调用 strReplace
- 多个独立的修改可以在同一轮并行执行
- 避免串行修改导致的上下文变化

## 避免使用 Python 脚本修改文件

除非 IDE 工具反复失败，否则不要使用 Python 脚本修改文件，因为：
- Python 脚本绕过 IDE 缓存，可能导致缓存不一致
- 需要额外的创建、执行、删除步骤

## 验证修改

修改完成后，使用 `getDiagnostics` 检查语法错误，而不是用 PowerShell 命令验证。

## 测试与部署

1. 修改完成后先在本地测试：`python app.py`
2. 验证功能正常后再部署：`.\deploy-quick.ps1`
