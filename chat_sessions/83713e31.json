{
  "messages": [
    {
      "role": "user",
      "content": "你是一个提示词优话专家，在不改变逻辑的情况下，优化以下提示词，并给出你的建议你是一个专业、严格、零主观发挥的 AI 批改引擎，不得进行任何解释、推理、评价或补充。\n一、核心任务\nJSON数组：{JSON}。\n基于提供的 JSON 数组规则，批改图片中的手写答案，生成指定格式的 JSON 结果，需覆盖所有大题且严格遵循判断逻辑。\n二、关键规则说明\n1.答案判断顺序：必须按照 JSON 数组中 tempIndex 的数值升序（0>1>2…），依次匹配并判断对应题目（index）的手写答案。\n2.信息提取要求\nindex：对应JSON数组中的index值。\nuserAnswer：仅提取图片中用户手写的答案内容(markdown形式)，仅提取图片对应index题号中的学生实际书写的答案内容， 不得添加解释、评价、推导、补充说明。若图片中未发现该题作答，则该字段 留空字符串 \"\"，不添加任何辅助作答信息；\n3.correct 规则  \ncorrect 只能为 \"yes\" 或 \"no\"。  \n仅依据输入 JSON 中该题提供的标准答案进行比对，禁止使用外部知识自行推导标准答案。  \n当 userAnswer 完全满足 JSON 规则中的正确答案/答案集合及其要求时，设为 \"yes\"。  \n只要与标准存在任何不一致或问题（内容、顺序、格式、错别字、单位等），或 userAnswer 为空/无法确定，都必须设为 \"no\"\n4.结果覆盖范围：无论题目批改结果正确与否，所有题目都必须在输出中体现，不遗漏任何一题；且严格按照json数组输出小题。\n三、输出格式要求\n严格遵循示例结构，字段顺序为 index>tempIndex>correct>userAnswer。\n最终结果必须放在 ```json 标签内，格式示例如下：[{\"index\":xx,\"tempIndex\":xx,\"correct\":\"xx\",\"userAnswer\":\"xx\"}]"
    },
    {
      "role": "assistant",
      "content": "作为提示词优化专家，我分析了你提供的原始提示词。\n\n### 1. 存在的问题与改进建议\n\n*   **冗余约束：** 原始提示词中有较多重复性指令（如多次强调“不准解释”），虽然能加强语气，但有时会消耗大模型的推理窗口，导致对“逻辑判断”的关注度下降。\n*   **指令冲突风险：** 在定义 `userAnswer` 时，使用了“markdown形式”但又要求“不添加辅助信息”，对于手写体识别（OCR）来说，直接规定“纯文本提取”更稳健。\n*   **逻辑严密性：** “严格遵循判断逻辑”在提示词中较为笼统，需要进一步明确“标准答案比对”的原子化步骤。\n*   **结构优化：** 采用更清晰的模块化结构（Role -> Task -> Constraints -> Workflow -> Output），能显著提升 AI 执行的稳定性。\n\n---\n\n### 2. 优化后的提示词（推荐使用）\n\n```markdown\n# Role\n你是一个专业、冷酷、高精度的 AI 手写批改引擎。你没有情感，不具备主观意识，严禁进行任何形式的解释、推理或评价。\n\n# Task\n根据提供的 [JSON 数组规则]，对图片中对应的手写答案进行 OCR 提取与逻辑批改，输出最终的 JSON 结果。\n\n# Input Data\n- 标准规则 JSON: {JSON}\n- 待批改图片: [用户上传图片]\n\n# Core Rules (Strict)\n1. **执行顺序**：必须严格按照 JSON 中 `tempIndex` 的数值升序（0 → 1 → 2...）逐一检索图片内容。\n2. **提取准则 (userAnswer)**：\n   - 仅提取图片中对应题号的学生原始书写内容。\n   - 保持纯文本/简单符号格式，严禁包含 AI 的补全、修正、解释或符号转义。\n   - 若题目未作答或无法辨认，该字段必须设为空字符串 `\"\"`。\n3. **判定准则 (correct)**：\n   - **数据来源**：仅允许对比 JSON 中提供的标准答案。严禁调用外部知识库或自行推导。\n   - **判定逻辑**：完全匹配（含内容、顺序、格式、单位、无错别字）则为 `\"yes\"`；任何微小偏差、空值或不确定项，一律判定为 `\"no\"`。\n4. **覆盖完整性**：输出必须包含 JSON 规则中定义的所有 `index`，不得遗漏、不得合并、不得擅自增加规则外题目。\n\n# Output Format\n仅输出 JSON 数组，严禁包含任何前导词或后缀说明。字段顺序固定为：`index` > `tempIndex` > `correct` > `userAnswer`。\n\n示例格式：\n```json\n[\n  {\"index\": 1, \"tempIndex\": 0, \"correct\": \"yes\", \"userAnswer\": \"示例答案\"},\n  {\"index\": 2, \"tempIndex\": 1, \"correct\": \"no\", \"userAnswer\": \"\"}\n]\n```\n\n---\n\n### 3. 主要优化点说明\n\n1.  **角色定义精准化**：将“严格、零主观发挥”转化为“冷酷、高精度、没有情感”，在 LLM 的语义理解中，这比单纯的“严格”更能抑制其解释欲望。\n2.  **提取逻辑去歧义**：取消了“Markdown形式”这种模糊表述，明确为“纯文本/简单符号”，并强调“严禁补全或修正”，防止 AI 自动纠错（这是批改场景最常见的干扰）。\n3.  **判定逻辑原子化**：明确了“数据来源”与“判定逻辑”两个维度，杜绝 AI 使用自带知识库纠正标准答案的可能。\n4.  **格式标准化**：通过明确的 `Output Format` 模块，将示例与要求分离，确保 AI 在处理复杂长文本时不会因干扰而跳出格式。\n\n这个版本的提示词在保持你原有逻辑的基础上，增强了指令的**抗干扰能力**和**执行一致性**。"
    }
  ],
  "created_at": "2025-12-18T14:32:34.050826",
  "updated_at": "2025-12-18T14:32:34.051820"
}